{"openapi":"3.0.0","paths":{"/api/v1/auth/register/submit":{"post":{"description":"Validates registration data, stores temporarily in Redis, and sends OTP to email","operationId":"AuthController_registerSubmit","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterSubmitDto"}}}},"responses":{"200":{"description":"Registration data validated, OTP sent","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterSubmitResponseDto"}}}},"400":{"description":"Validation failed"},"409":{"description":"Email or slug already exists"}},"summary":"Step 1: Submit registration & receive OTP","tags":["Authentication"]}},"/api/v1/auth/register/confirm":{"post":{"description":"Verifies OTP, creates Tenant & User, returns auth tokens","operationId":"AuthController_registerConfirm","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterConfirmDto"}}}},"responses":{"201":{"description":"Account created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"400":{"description":"Invalid OTP or token expired"}},"summary":"Step 2: Confirm OTP & create account","tags":["Authentication"]}},"/api/v1/auth/login":{"post":{"description":"Authenticate user with email and password","operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"401":{"description":"Invalid credentials"}},"summary":"User login","tags":["Authentication"]}},"/api/v1/auth/refresh":{"post":{"description":"Generate new access token using valid refresh token","operationId":"AuthController_refresh","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"New access token generated","content":{"application/json":{"schema":{"properties":{"accessToken":{"type":"string"}}}}}},"401":{"description":"Invalid refresh token"}},"summary":"Refresh access token","tags":["Authentication"]}},"/api/v1/auth/logout":{"post":{"description":"Revoke refresh token and end session","operationId":"AuthController_logout","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutDto"}}}},"responses":{"204":{"description":"Logged out successfully"},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Logout user","tags":["Authentication"]}},"/api/v1/auth/logout-all":{"post":{"description":"Revoke all refresh tokens for the user","operationId":"AuthController_logoutAll","parameters":[],"responses":{"204":{"description":"Logged out from all devices"}},"security":[{"bearer":[]}],"summary":"Logout from all devices","tags":["Authentication"]}},"/api/v1/auth/me":{"get":{"description":"Retrieve authenticated user information and tenant details","operationId":"AuthController_getMe","parameters":[],"responses":{"200":{"description":"User profile retrieved","content":{"application/json":{"schema":{"properties":{"user":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"},"role":{"type":"string"},"tenantId":{"type":"string"}}},"tenant":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"slug":{"type":"string"},"status":{"type":"string"},"onboardingStep":{"type":"number"}}}}}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Get current user profile","tags":["Authentication"]}},"/api/v1/tenants/me":{"get":{"operationId":"TenantController_getCurrentTenant","parameters":[],"responses":{"200":{"description":"Tenant details retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get current tenant info","tags":["Tenants"]}},"/api/v1/tenants/profile":{"patch":{"operationId":"TenantController_updateProfile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileDto"}}}},"responses":{"200":{"description":"Profile updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}},"409":{"description":"Slug already exists"}},"security":[{"bearer":[]}],"summary":"Update tenant profile (Onboarding Step 1)","tags":["Tenants"]}},"/api/v1/tenants/opening-hours":{"patch":{"operationId":"TenantController_updateOpeningHours","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOpeningHoursDto"}}}},"responses":{"200":{"description":"Opening hours updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update opening hours (Onboarding Step 2)","tags":["Tenants"]}},"/api/v1/tenants/settings":{"patch":{"operationId":"TenantController_updateSettings","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSettingsDto"}}}},"responses":{"200":{"description":"Settings updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update settings (Onboarding Step 3)","tags":["Tenants"]}},"/api/v1/tenants/payment-config":{"patch":{"operationId":"TenantController_updatePaymentConfig","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePaymentConfigDto"}}}},"responses":{"200":{"description":"Payment config updated"}},"security":[{"bearer":[]}],"summary":"Update settings (Onboarding Step 4)","tags":["Tenants"]}},"/api/v1/tenants/complete-onboarding":{"post":{"operationId":"TenantController_completeOnboarding","parameters":[],"responses":{"200":{"description":"Tenant activated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Complete onboarding","tags":["Tenants"]}},"/api/v1/menu/categories":{"post":{"operationId":"MenuCategoryController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMenuCategoryDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}},"409":{"description":"Category name already exists for this tenant"}},"security":[{"bearer":[]}],"summary":"Create menu category","tags":["Menu - Categories"]},"get":{"operationId":"MenuCategoryController_findAll","parameters":[{"name":"activeOnly","required":false,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get all menu categories","tags":["Menu - Categories"]}},"/api/v1/menu/categories/{id}":{"get":{"operationId":"MenuCategoryController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get category by ID","tags":["Menu - Categories"]},"patch":{"operationId":"MenuCategoryController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateMenuCategoryDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update menu category","tags":["Menu - Categories"]},"delete":{"description":"Soft delete: Sets active = false","operationId":"MenuCategoryController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"summary":"Archive menu category","tags":["Menu - Categories"]}},"/api/v1/menu/item":{"post":{"operationId":"MenuItemsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMenuItemDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Create new menu item","tags":["Menu - Items"]},"get":{"operationId":"MenuItemsController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"categoryId","required":false,"in":"query","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"type":"string","enum":["DRAFT","PUBLISHED","ARCHIVED"]}},{"name":"available","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"chefRecommended","required":false,"in":"query","description":"Filter chef recommendations only","schema":{"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","description":"Sort field","schema":{"type":"string","enum":["popularity","price","name","createdAt"]}},{"name":"sortOrder","required":false,"in":"query","description":"Sort order","schema":{"type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get menu items with filters","tags":["Menu - Items"]}},"/api/v1/menu/item/{id}":{"get":{"operationId":"MenuItemsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get menu item by ID","tags":["Menu - Items"]},"patch":{"operationId":"MenuItemsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateMenuItemDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update menu item","tags":["Menu - Items"]},"delete":{"operationId":"MenuItemsController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete (archive) menu item","tags":["Menu - Items"]}},"/api/v1/menu/item/{id}/publish":{"post":{"operationId":"MenuItemsController_togglePublish","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishMenuItemDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Publish/Unpublish menu item","tags":["Menu - Items"]}},"/api/v1/menu/item/{id}/availability":{"patch":{"operationId":"MenuItemsController_toggleAvailability","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleAvailabilityDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Toggle item availability","tags":["Menu - Items"]}},"/api/v1/menu/modifiers":{"post":{"operationId":"ModifierGroupController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateModifierGroupDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Create new modifier group","tags":["Menu - Modifiers"]},"get":{"operationId":"ModifierGroupController_findAll","parameters":[{"name":"activeOnly","required":false,"in":"query","description":"Filter by active status","schema":{"type":"boolean"}},{"name":"type","required":false,"in":"query","description":"Filter by modifier type","schema":{"enum":["SINGLE_CHOICE","MULTI_CHOICE"],"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get all modifier groups","tags":["Menu - Modifiers"]}},"/api/v1/menu/modifiers/{id}":{"get":{"operationId":"ModifierGroupController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get modifier group by ID","tags":["Menu - Modifiers"]},"patch":{"operationId":"ModifierGroupController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateModifierGroupDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update modifier group","tags":["Menu - Modifiers"]},"delete":{"description":"Soft delete: Sets active = false after checking dependencies","operationId":"ModifierGroupController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"summary":"Archive modifier group","tags":["Menu - Modifiers"]}},"/api/v1/menu/public":{"get":{"operationId":"PublicMenuController_getPublicMenu","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicMenuResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get published menu (for customers)","tags":["Menu - Public"]}},"/api/v1/menu/items/{itemId}/photos":{"post":{"operationId":"MenuPhotoController_uploadPhoto","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/UploadPhotoDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}}}},"400":{"description":"Invalid file type or size"}},"security":[{"bearer":[]}],"summary":"Upload photo for menu item","tags":["Menu - Photos"]},"get":{"operationId":"MenuPhotoController_getPhotos","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get all photos for menu item","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/bulk":{"post":{"operationId":"MenuPhotoController_uploadPhotos","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"files":{"type":"array","items":{"type":"string","format":"binary"}}}}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}}}}},"400":{"description":"Invalid files"}},"security":[{"bearer":[]}],"summary":"Upload multiple photos for menu item (max 10)","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/{photoId}/primary":{"patch":{"operationId":"MenuPhotoController_setPrimary","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}},{"name":"photoId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Primary photo updated"}},"security":[{"bearer":[]}],"summary":"Set photo as primary","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/{photoId}/order":{"patch":{"operationId":"MenuPhotoController_updateOrder","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}},{"name":"photoId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePhotoDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update photo display order","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/{photoId}":{"delete":{"operationId":"MenuPhotoController_deletePhoto","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}},{"name":"photoId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete photo","tags":["Menu - Photos"]}},"/api/v1/admin/tables":{"post":{"operationId":"TableController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTableDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}},"409":{"description":"Table number already exists"}},"security":[{"bearer":[]}],"summary":"Create new table with auto QR generation","tags":["Tables"]},"get":{"operationId":"TableController_findAll","parameters":[{"name":"activeOnly","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"status","required":false,"in":"query","schema":{"enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"],"type":"string"}},{"name":"location","required":false,"in":"query","schema":{"type":"string"}},{"name":"sortBy","required":false,"in":"query","schema":{"enum":["tableNumber","capacity","createdAt"],"type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"enum":["asc","desc"],"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get all tables with filters","tags":["Tables"]}},"/api/v1/admin/tables/locations":{"get":{"operationId":"TableController_getLocations","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"security":[{"bearer":[]}],"summary":"Get distinct locations for filter dropdown","tags":["Tables"]}},"/api/v1/admin/tables/{id}":{"get":{"operationId":"TableController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}},"404":{"description":"Table not found"}},"security":[{"bearer":[]}],"summary":"Get table by ID","tags":["Tables"]},"put":{"operationId":"TableController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTableDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}},"404":{"description":"Table not found"},"409":{"description":"Table number already exists"}},"security":[{"bearer":[]}],"summary":"Update table","tags":["Tables"]},"delete":{"operationId":"TableController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Table deleted successfully"},"409":{"description":"Cannot delete table with active orders"}},"security":[{"bearer":[]}],"summary":"Delete table (soft delete)","tags":["Tables"]}},"/api/v1/admin/tables/{id}/status":{"patch":{"operationId":"TableController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"status":{"enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update table status only","tags":["Tables"]}},"/api/v1/admin/tables/{id}/qr/generate":{"post":{"operationId":"TableController_regenerateQr","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegenerateQrResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Regenerate QR code for table","tags":["Tables"]}},"/api/v1/admin/tables/qr/regenerate-all":{"post":{"description":"Regenerates QR codes for all active tables. Old QR codes will be invalidated. Requires OWNER role.","operationId":"TableController_bulkRegenerateAllQr","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkRegenerateQrResponseDto"}}}},"400":{"description":"No active tables found"}},"security":[{"bearer":[]}],"summary":"Bulk regenerate QR codes for all tables","tags":["Tables"]}},"/api/v1/admin/tables/{id}/qr/download":{"get":{"operationId":"TableController_downloadQr","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"format","required":false,"in":"query","description":"Default: png","schema":{"enum":["png","svg","pdf"],"type":"string"}}],"responses":{"200":{"description":"QR code file"}},"security":[{"bearer":[]}],"summary":"Download QR code (PNG/SVG/PDF)","tags":["Tables"]}},"/api/v1/admin/tables/qr/download-all":{"get":{"operationId":"TableController_downloadAllQr","parameters":[{"name":"format","required":false,"in":"query","description":"Default: zip","schema":{"enum":["zip","pdf"],"type":"string"}}],"responses":{"200":{"description":"ZIP file or PDF with all QR codes"}},"security":[{"bearer":[]}],"summary":"Download all QR codes (ZIP or multi-page PDF)","tags":["Tables"]}},"/api/v1/admin/tables/bulk/status":{"patch":{"operationId":"TableController_bulkUpdateStatus","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"tableIds":{"type":"array","items":{"type":"string"}},"status":{"enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"properties":{"updated":{"type":"number"}}}}}}},"security":[{"bearer":[]}],"summary":"Bulk update table status","tags":["Tables"]}},"/api/v1/admin/tables/{id}/clear":{"post":{"description":"Staff marks table as cleared. Deactivates active session and frees the table.","operationId":"TableController_clearTable","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"properties":{"message":{"type":"string","example":"Table cleared successfully"},"tableId":{"type":"string"},"clearedAt":{"type":"string","format":"date-time"},"clearedBy":{"type":"string"}}}}}},"404":{"description":"No active session for this table"}},"security":[{"bearer":[]}],"summary":"Clear table (Haidilao style)","tags":["Tables"]}},"/api/v1/admin/tables/sessions/active":{"get":{"description":"Returns all tables currently in use with session info","operationId":"TableController_getActiveSessions","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"properties":{"sessionId":{"type":"string"},"tableId":{"type":"string"},"tableNumber":{"type":"string"},"scannedAt":{"type":"string","format":"date-time"}}}}}}}},"security":[{"bearer":[]}],"summary":"Get all active sessions (for monitoring)","tags":["Tables"]}},"/api/v1/t/{qrToken}":{"get":{"description":"Customer scans QR code, creates session, sets cookie, and redirects to menu","operationId":"PublicTableController_scanQr","parameters":[{"name":"qrToken","required":true,"in":"path","description":"QR token from scanned code","schema":{"type":"string"}}],"responses":{"302":{"description":"Redirect to /menu with session cookie"},"400":{"description":"Invalid QR token"},"409":{"description":"Table is already in use"}},"summary":"Scan QR code (Haidilao style)","tags":["Tables - Public"]}},"/api/v1/session":{"get":{"description":"Returns table info for current session","operationId":"PublicTableController_getSessionInfo","parameters":[],"responses":{"200":{"description":""},"401":{"description":"Session invalid or expired"}},"security":[{"table_session_id":[]}],"summary":"Get current session information","tags":["Tables - Public"]}},"/api/v1/menu":{"get":{"description":"Returns menu based on session cookie (no QR token needed)","operationId":"PublicTableController_getMenu","parameters":[],"responses":{"200":{"description":""},"401":{"description":"Session invalid or expired"}},"security":[{"table_session_id":[]}],"summary":"Get menu for current session","tags":["Tables - Public"]}}},"info":{"title":"QR Ordering API","description":"API Documentation for QR Ordering Platform","version":"1.0","contact":{}},"tags":[{"name":"Authentication","description":"User authentication & registration"},{"name":"Tenants","description":"Restaurant/tenant management"},{"name":"Menu - Categories","description":"Menu categories management"},{"name":"Menu - Items","description":"Menu items management"},{"name":"Menu - Modifiers","description":"Menu item modifiers management"},{"name":"Menu - Public","description":"Menu public management"},{"name":"Tables","description":"Table management & QR codes"},{"name":"Orders","description":"Order placement & management"},{"name":"Payments","description":"Payment processing"}],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"RegisterSubmitDto":{"type":"object","properties":{"email":{"type":"string","example":"owner@restaurant.com"},"password":{"type":"string","example":"StrongPassword!123","minLength":8},"fullName":{"type":"string","example":"Nguyen Van A"},"tenantName":{"type":"string","example":"Pho Ngon 123"},"slug":{"type":"string","example":"pho-ngon-123"}},"required":["email","password","fullName","tenantName","slug"]},"RegisterSubmitResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Validation successful. OTP sent to email."},"registrationToken":{"type":"string","example":"a1b2c3d4-..."},"expiresIn":{"type":"number","example":600}},"required":["message","registrationToken","expiresIn"]},"RegisterConfirmDto":{"type":"object","properties":{"registrationToken":{"type":"string","example":"a1b2c3d4-e5f6-..."},"otp":{"type":"string","example":"123456"}},"required":["registrationToken","otp"]},"AuthUserResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"uuid-user-1"},"email":{"type":"string","example":"owner@restaurant.com"},"fullName":{"type":"string","example":"Nguyen Van A"},"role":{"type":"string","example":"OWNER","enum":["OWNER","STAFF","KITCHEN"]},"tenantId":{"type":"string","example":"uuid-tenant-1"}},"required":["id","email","fullName","role"]},"AuthTenantResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"uuid-tenant-1"},"name":{"type":"string","example":"Pho Ngon 123"},"slug":{"type":"string","example":"pho-ngon-123"},"status":{"type":"string","example":"ACTIVE","enum":["DRAFT","ACTIVE","SUSPENDED"]},"onboardingStep":{"type":"number","example":1}},"required":["id","name","slug","status","onboardingStep"]},"AuthResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","example":"eyJhbGciOiJIUzI1Ni..."},"refreshToken":{"type":"string","example":"d792f321-..."},"expiresIn":{"type":"number","example":3600,"description":"Access token expiration time in seconds"},"user":{"$ref":"#/components/schemas/AuthUserResponseDto"},"tenant":{"$ref":"#/components/schemas/AuthTenantResponseDto"}},"required":["accessToken","refreshToken","expiresIn","user"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"owner@restaurant.com"},"password":{"type":"string","example":"StrongPassword!123"},"deviceInfo":{"type":"string","example":"Chrome 120 on MacOS"}},"required":["email","password"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"LogoutDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"TenantResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"slug":{"type":"string"},"status":{"type":"string"},"onboardingStep":{"type":"number"},"settings":{"type":"object"},"openingHours":{"type":"object"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","slug","status","onboardingStep","createdAt","updatedAt"]},"UpdateProfileDto":{"type":"object","properties":{"name":{"type":"string","example":"Phá»Ÿ Ngon 123"},"description":{"type":"string","example":"Authentic Vietnamese Pho Restaurant"},"phone":{"type":"string","example":"+84901234567"},"address":{"type":"string","example":"123 Nguyen Hue, District 1, HCMC"},"logoUrl":{"type":"string","example":"https://cdn.example.com/logo.png"},"slug":{"type":"string","example":"pho-ngon-123"}},"required":["name","description","phone","address","logoUrl","slug"]},"DaySchedule":{"type":"object","properties":{"open":{"type":"string","example":"08:00"},"close":{"type":"string","example":"22:00"},"closed":{"type":"boolean","example":false}},"required":["open","close","closed"]},"UpdateOpeningHoursDto":{"type":"object","properties":{"monday":{"$ref":"#/components/schemas/DaySchedule"},"tuesday":{"$ref":"#/components/schemas/DaySchedule"},"wednesday":{"$ref":"#/components/schemas/DaySchedule"},"thursday":{"$ref":"#/components/schemas/DaySchedule"},"friday":{"$ref":"#/components/schemas/DaySchedule"},"saturday":{"$ref":"#/components/schemas/DaySchedule"},"sunday":{"$ref":"#/components/schemas/DaySchedule"}},"required":["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},"UpdateSettingsDto":{"type":"object","properties":{"language":{"type":"string","example":"vi"},"timezone":{"type":"string","example":"Asia/Ho_Chi_Minh"}},"required":["language","timezone"]},"UpdatePaymentConfigDto":{"type":"object","properties":{"stripeAccountId":{"type":"string","example":"acct_123456789"}},"required":["stripeAccountId"]},"CreateMenuCategoryDto":{"type":"object","properties":{"name":{"type":"string","example":"Appetizers"},"description":{"type":"string","example":"Start your meal with these delicious appetizers"},"displayOrder":{"type":"number","example":1},"active":{"type":"boolean","example":true}},"required":["name"]},"MenuCategoryResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"displayOrder":{"type":"number"},"active":{"type":"boolean"},"itemCount":{"type":"number"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","displayOrder","active","itemCount","createdAt","updatedAt"]},"UpdateMenuCategoryDto":{"type":"object","properties":{"name":{"type":"string","example":"Starters"},"description":{"type":"string"},"displayOrder":{"type":"number"},"active":{"type":"boolean"}}},"CreateMenuItemDto":{"type":"object","properties":{"name":{"type":"string","example":"Spring Rolls"},"description":{"type":"string","example":"Fresh vegetable spring rolls with sweet chili sauce"},"categoryId":{"type":"string","example":"cat_1"},"price":{"type":"number","example":50000},"preparationTime":{"type":"number","example":15,"minimum":0,"maximum":240},"chefRecommended":{"type":"boolean","example":true},"imageUrl":{"type":"string","example":"https://cdn.example.com/spring-rolls.jpg"},"tags":{"example":["popular","vegetarian"],"type":"array","items":{"type":"string"}},"allergens":{"example":["gluten"],"type":"array","items":{"type":"string"}},"displayOrder":{"type":"number","example":1},"modifierGroupIds":{"example":["mod_1","mod_2"],"type":"array","items":{"type":"string"}}},"required":["name","categoryId","price"]},"ModifierOptionResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"priceDelta":{"type":"number"},"displayOrder":{"type":"number"},"active":{"type":"boolean"}},"required":["id","name","priceDelta","displayOrder","active"]},"ModifierGroupResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"type":{"type":"string"},"required":{"type":"boolean"},"minChoices":{"type":"number"},"maxChoices":{"type":"number"},"displayOrder":{"type":"number"},"active":{"type":"boolean"},"options":{"type":"array","items":{"$ref":"#/components/schemas/ModifierOptionResponseDto"}}},"required":["id","name","type","required","minChoices","displayOrder","active","options"]},"MenuItemResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"categoryId":{"type":"string"},"categoryName":{"type":"string"},"price":{"type":"number"},"imageUrl":{"type":"string"},"status":{"type":"string"},"available":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"}},"allergens":{"type":"array","items":{"type":"string"}},"displayOrder":{"type":"number"},"category":{"$ref":"#/components/schemas/MenuCategoryResponseDto"},"modifierGroups":{"type":"array","items":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"publishedAt":{"format":"date-time","type":"string"}},"required":["id","name","categoryId","categoryName","price","status","available","displayOrder","createdAt","updatedAt"]},"UpdateMenuItemDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"categoryId":{"type":"string"},"price":{"type":"number"},"preparationTime":{"type":"number"},"chefRecommended":{"type":"boolean"},"imageUrl":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"allergens":{"type":"array","items":{"type":"string"}},"displayOrder":{"type":"number"},"available":{"type":"boolean"},"modifierGroupIds":{"type":"array","items":{"type":"string"}}}},"PublishMenuItemDto":{"type":"object","properties":{"publish":{"type":"boolean","example":true}},"required":["publish"]},"ToggleAvailabilityDto":{"type":"object","properties":{"available":{"type":"boolean","example":true}},"required":["available"]},"ModifierOptionDto":{"type":"object","properties":{"id":{"type":"string","example":"opt_1"},"name":{"type":"string","example":"Small"},"priceDelta":{"type":"number","example":-10000},"displayOrder":{"type":"number","example":1}},"required":["name","priceDelta","displayOrder"]},"CreateModifierGroupDto":{"type":"object","properties":{"name":{"type":"string","example":"Size"},"description":{"type":"string","example":"Choose your preferred size"},"type":{"type":"string","enum":["SINGLE_CHOICE","MULTI_CHOICE"],"example":"SINGLE_CHOICE"},"required":{"type":"boolean","example":true},"minChoices":{"type":"number","example":1},"maxChoices":{"type":"number","example":3},"displayOrder":{"type":"number"},"options":{"example":[{"name":"Small","priceDelta":-10000,"displayOrder":1},{"name":"Medium","priceDelta":0,"displayOrder":2},{"name":"Large","priceDelta":15000,"displayOrder":3}],"type":"array","items":{"$ref":"#/components/schemas/ModifierOptionDto"}}},"required":["name","type","required","options"]},"UpdateModifierGroupDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"type":{"type":"string","enum":["SINGLE_CHOICE","MULTI_CHOICE"]},"required":{"type":"boolean"},"minChoices":{"type":"number"},"maxChoices":{"type":"number"},"displayOrder":{"type":"number"},"active":{"type":"boolean"},"options":{"type":"array","items":{"$ref":"#/components/schemas/ModifierOptionDto"}}}},"PublicMenuResponseDto":{"type":"object","properties":{"categories":{"type":"array","items":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}},"publishedAt":{"format":"date-time","type":"string"}},"required":["categories","publishedAt"]},"UploadPhotoDto":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]},"MenuItemPhotoResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"photo_123","description":"Menu photo ID"},"url":{"type":"string","example":"https://example.com/photo.jpg","description":"Menu photo URL"},"filename":{"type":"string","example":"photo.jpg","description":"Photo file name"},"mimeType":{"type":"string","example":"image/jpeg","description":"Photo MIME type"},"size":{"type":"number","example":204800,"description":"Photo file size (bytes)"},"displayOrder":{"type":"number","example":1,"description":"Photo display order"},"isPrimary":{"type":"boolean","example":true,"description":"Is primary menu photo"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-22T10:00:00.000Z","description":"Photo creation time"}},"required":["id","url","filename","mimeType","size","displayOrder","isPrimary","createdAt"]},"UpdatePhotoDto":{"type":"object","properties":{"displayOrder":{"type":"number"}}},"CreateTableDto":{"type":"object","properties":{"tableNumber":{"type":"string","example":"Table 1","description":"Table number/name (unique per tenant)"},"capacity":{"type":"number","example":4,"minimum":1,"maximum":20,"description":"Number of seats (1-20)"},"location":{"type":"string","example":"Main Hall","description":"Table location/zone"},"description":{"type":"string","example":"Window table with city view","description":"Additional description"},"displayOrder":{"type":"number","example":0,"description":"Display order for sorting"}},"required":["tableNumber","capacity"]},"TableResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"123e4567-e89b-12d3-a456-426614174000"},"tenantId":{"type":"string","example":"123e4567-e89b-12d3-a456-426614174000"},"tableNumber":{"type":"string","example":"Table 1"},"capacity":{"type":"number","example":4},"location":{"type":"string","example":"Main Hall"},"description":{"type":"string","example":"Window table with city view"},"status":{"type":"string","enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"],"example":"AVAILABLE"},"active":{"type":"boolean","example":true},"displayOrder":{"type":"number","example":0},"qrCodeUrl":{"type":"string","example":"/api/v1/admin/tables/123/qr/download","description":"URL to download QR code"},"qrToken":{"type":"string","example":"eyJhbGc...signature","description":"QR token to generate QR code URL"},"qrGeneratedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"QR code generation timestamp"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z"}},"required":["id","tenantId","tableNumber","capacity","status","active","displayOrder","createdAt","updatedAt"]},"TableListMetaDto":{"type":"object","properties":{"totalAll":{"type":"number","example":25,"description":"Total number of tables for this restaurant (without filters)"},"totalFiltered":{"type":"number","example":10,"description":"Number of tables after applying filters"}},"required":["totalAll","totalFiltered"]},"TableListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/TableResponseDto"}},"meta":{"$ref":"#/components/schemas/TableListMetaDto"}},"required":["data","meta"]},"UpdateTableDto":{"type":"object","properties":{"tableNumber":{"type":"string","example":"Table 1A","description":"Table number/name"},"capacity":{"type":"number","example":6,"minimum":1,"maximum":20,"description":"Number of seats"},"location":{"type":"string","example":"VIP Room","description":"Table location/zone"},"description":{"type":"string","example":"Near window","description":"Additional description"},"status":{"type":"string","enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"],"example":"OCCUPIED","description":"Table status"},"active":{"type":"boolean","example":true,"description":"Active status (soft delete)"},"displayOrder":{"type":"number","example":1,"description":"Display order"}}},"RegenerateQrResponseDto":{"type":"object","properties":{"tableId":{"type":"string","example":"123e4567-e89b-12d3-a456-426614174000"},"qrToken":{"type":"string","example":"eyJhbGc...signature","description":"New QR token"},"qrCodeUrl":{"type":"string","example":"/api/v1/admin/tables/123/qr/download","description":"URL to download new QR code"},"generatedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Generation timestamp"}},"required":["tableId","qrToken","qrCodeUrl","generatedAt"]},"BulkRegenerateQrResponseDto":{"type":"object","properties":{"totalProcessed":{"type":"number","example":15,"description":"Total number of tables processed"},"successCount":{"type":"number","example":15,"description":"Number of QR codes successfully regenerated"},"failureCount":{"type":"number","example":0,"description":"Number of failures"},"affectedTables":{"example":["Table 1","Table 2","VIP-A"],"description":"List of affected table numbers","type":"array","items":{"type":"string"}},"regeneratedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Bulk operation timestamp"}},"required":["totalProcessed","successCount","failureCount","affectedTables","regeneratedAt"]}}}}