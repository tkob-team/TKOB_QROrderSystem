{"openapi":"3.0.0","paths":{"/health":{"get":{"description":"Returns 200 if the server is running. Used by load balancers and monitoring tools.","operationId":"HealthController_basicHealth","parameters":[],"responses":{"200":{"description":"Server is healthy"}},"summary":"Basic health check","tags":["Health"]}},"/api/v1/health/detailed":{"get":{"description":"Returns detailed health status including database and Redis connectivity.","operationId":"HealthController_detailedHealth","parameters":[],"responses":{"200":{"description":"Detailed health information","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","degraded","unhealthy"]},"timestamp":{"type":"string"},"version":{"type":"string"},"uptime":{"type":"number"},"services":{"type":"object","properties":{"database":{"type":"object","properties":{"status":{"type":"string","enum":["up","down"]},"latency":{"type":"number"}}},"redis":{"type":"object","properties":{"status":{"type":"string","enum":["up","down"]},"latency":{"type":"number"}}}}}}}}}}},"summary":"Detailed health check","tags":["Health"]}},"/api/v1/health/ready":{"get":{"description":"Returns 200 if the server is ready to accept traffic (DB and Redis are connected).","operationId":"HealthController_readinessCheck","parameters":[],"responses":{"200":{"description":"Server is ready"},"503":{"description":"Server is not ready"}},"summary":"Readiness check","tags":["Health"]}},"/api/v1/health/live":{"get":{"description":"Returns 200 if the server process is running. Used by Kubernetes liveness probes.","operationId":"HealthController_livenessCheck","parameters":[],"responses":{"200":{"description":"Server is alive"}},"summary":"Liveness check","tags":["Health"]}},"/api/v1/menu/categories":{"post":{"operationId":"MenuCategoryController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMenuCategoryDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}},"409":{"description":"Category name already exists for this tenant"}},"security":[{"bearer":[]}],"summary":"Create menu category","tags":["Menu - Categories"]},"get":{"operationId":"MenuCategoryController_findAll","parameters":[{"name":"activeOnly","required":false,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get all menu categories","tags":["Menu - Categories"]}},"/api/v1/menu/categories/{id}":{"get":{"operationId":"MenuCategoryController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get category by ID","tags":["Menu - Categories"]},"patch":{"operationId":"MenuCategoryController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateMenuCategoryDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuCategoryResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update menu category","tags":["Menu - Categories"]},"delete":{"description":"Soft delete: Sets active = false","operationId":"MenuCategoryController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"summary":"Archive menu category","tags":["Menu - Categories"]}},"/api/v1/menu/item":{"post":{"operationId":"MenuItemsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMenuItemDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}},"403":{"description":"Subscription limit exceeded"}},"security":[{"bearer":[]}],"summary":"Create new menu item","tags":["Menu - Items"]},"get":{"operationId":"MenuItemsController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"categoryId","required":false,"in":"query","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"type":"string","enum":["DRAFT","PUBLISHED","ARCHIVED"]}},{"name":"available","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"chefRecommended","required":false,"in":"query","description":"Filter chef recommendations only","schema":{"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","description":"Sort field","schema":{"type":"string","enum":["popularity","price","name","createdAt"]}},{"name":"sortOrder","required":false,"in":"query","description":"Sort order","schema":{"type":"string","enum":["asc","desc"]}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get menu items with filters","tags":["Menu - Items"]}},"/api/v1/menu/item/{id}":{"get":{"operationId":"MenuItemsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get menu item by ID","tags":["Menu - Items"]},"patch":{"operationId":"MenuItemsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateMenuItemDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update menu item","tags":["Menu - Items"]},"delete":{"operationId":"MenuItemsController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Archive menu item","tags":["Menu - Items"]}},"/api/v1/menu/item/{id}/publish":{"post":{"operationId":"MenuItemsController_togglePublish","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishMenuItemDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Publish/Unpublish menu item","tags":["Menu - Items"]}},"/api/v1/menu/item/{id}/availability":{"patch":{"operationId":"MenuItemsController_toggleAvailability","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToggleAvailabilityDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Toggle item availability","tags":["Menu - Items"]}},"/api/v1/menu/modifiers":{"post":{"operationId":"ModifierGroupController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateModifierGroupDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Create new modifier group","tags":["Menu - Modifiers"]},"get":{"operationId":"ModifierGroupController_findAll","parameters":[{"name":"activeOnly","required":false,"in":"query","description":"Filter by active status","schema":{"type":"boolean"}},{"name":"type","required":false,"in":"query","description":"Filter by modifier type","schema":{"enum":["SINGLE_CHOICE","MULTI_CHOICE"],"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get all modifier groups","tags":["Menu - Modifiers"]}},"/api/v1/menu/modifiers/{id}":{"get":{"operationId":"ModifierGroupController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get modifier group by ID","tags":["Menu - Modifiers"]},"patch":{"operationId":"ModifierGroupController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateModifierGroupDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update modifier group","tags":["Menu - Modifiers"]},"delete":{"description":"Soft delete: Sets active = false after checking dependencies","operationId":"ModifierGroupController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Archive modifier group","tags":["Menu - Modifiers"]}},"/api/v1/menu/public":{"get":{"description":"Public endpoint - can be accessed with or without authentication. If not authenticated, tenantId must be provided via query parameter.","operationId":"PublicMenuController_getPublicMenu","parameters":[{"name":"tenantId","required":false,"in":"query","description":"Tenant ID (required if not authenticated)","schema":{"type":"string"}},{"name":"search","required":false,"in":"query","description":"Search by item name or description","schema":{"type":"string"}},{"name":"categoryId","required":false,"in":"query","description":"Filter by category ID","schema":{"type":"string"}},{"name":"chefRecommended","required":false,"in":"query","description":"Filter chef recommended items only","schema":{"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","schema":{"default":"displayOrder","type":"string","enum":["popularity","price","name","displayOrder"]}},{"name":"sortOrder","required":false,"in":"query","schema":{"default":"asc","type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicMenuResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get published menu (for customers)","tags":["Menu - Public"]}},"/api/v1/menu/items/{itemId}/photos":{"post":{"operationId":"MenuPhotoController_uploadPhoto","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/UploadPhotoDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}}}},"400":{"description":"Invalid file type or size"}},"security":[{"bearer":[]}],"summary":"Upload photo for menu item","tags":["Menu - Photos"]},"get":{"operationId":"MenuPhotoController_getPhotos","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}}}}}},"security":[{"bearer":[]}],"summary":"Get all photos for menu item","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/bulk":{"post":{"operationId":"MenuPhotoController_uploadPhotos","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"files":{"type":"array","items":{"type":"string","format":"binary"}}}}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}}}}},"400":{"description":"Invalid files"}},"security":[{"bearer":[]}],"summary":"Upload multiple photos for menu item (max 10)","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/{photoId}/primary":{"patch":{"operationId":"MenuPhotoController_setPrimary","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}},{"name":"photoId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Primary photo updated"}},"security":[{"bearer":[]}],"summary":"Set photo as primary","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/{photoId}/order":{"patch":{"operationId":"MenuPhotoController_updateOrder","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}},{"name":"photoId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePhotoDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update photo display order","tags":["Menu - Photos"]}},"/api/v1/menu/items/{itemId}/photos/{photoId}":{"delete":{"operationId":"MenuPhotoController_deletePhoto","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}},{"name":"photoId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete photo","tags":["Menu - Photos"]}},"/api/v1/admin/subscription/plans":{"get":{"operationId":"SubscriptionController_getPlans","parameters":[],"responses":{"200":{"description":"List of subscription plans"}},"security":[{"bearer":[]}],"summary":"Get all available subscription plans","tags":["Subscription"]}},"/api/v1/admin/subscription/current":{"get":{"operationId":"SubscriptionController_getCurrentSubscription","parameters":[],"responses":{"200":{"description":"Current subscription details"}},"security":[{"bearer":[]}],"summary":"Get current tenant subscription","tags":["Subscription"]}},"/api/v1/admin/subscription/usage":{"get":{"operationId":"SubscriptionController_getUsage","parameters":[],"responses":{"200":{"description":"Usage stats for tenant"}},"security":[{"bearer":[]}],"summary":"Get current usage statistics","tags":["Subscription"]}},"/api/v1/admin/subscription/check-limit":{"post":{"operationId":"SubscriptionController_checkLimit","parameters":[],"responses":{"200":{"description":"Limit check result"}},"security":[{"bearer":[]}],"summary":"Check if an action is allowed based on limits","tags":["Subscription"]}},"/api/v1/admin/subscription/upgrade":{"post":{"description":"Creates a SePay payment intent for subscription upgrade. Returns QR code for payment.","operationId":"SubscriptionController_createUpgradePayment","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSubscriptionPaymentDto"}}}},"responses":{"200":{"description":"Payment intent created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPaymentResponseDto"}}}},"400":{"description":"Invalid upgrade request"},"404":{"description":"Plan not found"}},"security":[{"bearer":[]}],"summary":"Create subscription upgrade payment","tags":["Subscription"]}},"/api/v1/admin/subscription/upgrade/{paymentId}/status":{"get":{"description":"Polls SePay to check if payment was completed. If paid, automatically upgrades subscription.","operationId":"SubscriptionController_checkUpgradePaymentStatus","parameters":[{"name":"paymentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPaymentStatusDto"}}}},"404":{"description":"Payment not found"}},"security":[{"bearer":[]}],"summary":"Check subscription upgrade payment status","tags":["Subscription"]}},"/api/v1/subscription/plans":{"get":{"description":"Public endpoint for landing page, pricing page, marketing materials. No authentication required.","operationId":"PublicSubscriptionController_getPublicPlans","parameters":[],"responses":{"200":{"description":"List of subscription plans with pricing and features","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"tier":{"type":"string","enum":["FREE","BASIC","PREMIUM"]},"name":{"type":"string"},"description":{"type":"string"},"priceUSD":{"type":"number"},"priceVND":{"type":"number"},"maxTables":{"type":"number","description":"-1 means unlimited"},"maxMenuItems":{"type":"number","description":"-1 means unlimited"},"maxOrdersMonth":{"type":"number","description":"-1 means unlimited"},"maxStaff":{"type":"number","description":"-1 means unlimited"},"features":{"type":"object","description":"Feature flags for this plan","additionalProperties":{"type":"boolean"}}}}}}}}},"summary":"Get all available subscription plans (Public)","tags":["Subscription - Public"]}},"/api/v1/subscription/plans/{tier}":{"get":{"description":"Get detailed information about a specific plan. Useful for upgrade/compare flows.","operationId":"PublicSubscriptionController_getPlanByTier","parameters":[{"name":"tier","required":true,"in":"path","description":"Subscription tier","schema":{"enum":["FREE","BASIC","PREMIUM"],"type":"string"}}],"responses":{"200":{"description":"Plan details","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"tier":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"priceUSD":{"type":"number"},"priceVND":{"type":"number"},"maxTables":{"type":"number"},"maxMenuItems":{"type":"number"},"maxOrdersMonth":{"type":"number"},"maxStaff":{"type":"number"},"features":{"type":"object"}}}}}},"404":{"description":"Plan not found"}},"summary":"Get a specific subscription plan by tier","tags":["Subscription - Public"]}},"/api/v1/subscription/features":{"get":{"description":"Returns a comparison of features across all plans. Useful for pricing tables.","operationId":"PublicSubscriptionController_getFeatureComparison","parameters":[],"responses":{"200":{"description":"Feature comparison matrix","content":{"application/json":{"schema":{"type":"object","properties":{"features":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"FREE":{"type":"boolean"},"BASIC":{"type":"boolean"},"PREMIUM":{"type":"boolean"}}}},"limits":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"FREE":{"type":"string"},"BASIC":{"type":"string"},"PREMIUM":{"type":"string"}}}}}}}}}},"summary":"Get feature comparison matrix","tags":["Subscription - Public"]}},"/api/v1/payment/exchange-rate":{"get":{"operationId":"PaymentController_getExchangeRate","parameters":[],"responses":{"200":{"description":"Exchange rate retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"from":{"type":"string","example":"USD"},"to":{"type":"string","example":"VND"},"rate":{"type":"number","example":25000},"timestamp":{"type":"string","format":"date-time"}}}}}}},"summary":"Get current USD to VND exchange rate","tags":["Payments"]}},"/api/v1/payment/intent":{"post":{"operationId":"PaymentController_createPaymentIntent","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentIntentDto"}}}},"responses":{"201":{"description":"Payment intent created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentIntentResponseDto"}}}},"400":{"description":"Invalid order or order already paid"},"404":{"description":"Order not found"}},"security":[{"bearer":[]}],"summary":"Create payment intent for order","tags":["Payments"]}},"/api/v1/payment/{paymentId}":{"get":{"operationId":"PaymentController_getPaymentStatus","parameters":[{"name":"paymentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment status retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentStatusResponseDto"}}}},"404":{"description":"Payment not found"}},"summary":"Get payment status","tags":["Payments"]}},"/api/v1/payment/webhook":{"post":{"operationId":"PaymentController_handleWebhook","parameters":[{"name":"authorization","required":true,"in":"header","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentWebhookDto"}}}},"responses":{"200":{"description":"Webhook processed successfully"},"400":{"description":"Invalid signature or payload"},"401":{"description":"Invalid webhook signature"}},"summary":"SePay webhook handler","tags":["Payments"]}},"/api/v1/payment/poll":{"get":{"description":"Fallback mechanism when webhook not available. Polls SePay API for recent transactions.","operationId":"PaymentController_pollTransactions","parameters":[{"name":"transferContent","required":false,"in":"query","description":"Specific transfer content to search for","schema":{"example":"DH123456","type":"string"}},{"name":"limit","required":false,"in":"query","description":"Number of transactions to fetch (default 20)","schema":{"default":20,"example":20,"type":"number"}}],"responses":{"200":{"description":"Transactions retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PollTransactionsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Poll SePay for recent transactions","tags":["Payments"]}},"/api/v1/payment/{paymentId}/check":{"get":{"description":"Checks if a pending payment has been paid by polling SePay API. Use this when webhook is not available.","operationId":"PaymentController_checkPaymentViaPoll","parameters":[{"name":"paymentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment check result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckPaymentResponseDto"}}}}},"summary":"Check payment status via SePay polling","tags":["Payments"]}},"/api/v1/admin/payment-config":{"get":{"operationId":"PaymentConfigController_getConfig","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentConfigResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get payment configuration for tenant","tags":["Payment Config"]},"put":{"operationId":"PaymentConfigController_updateConfig","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePaymentConfigDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentConfigResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update payment configuration","tags":["Payment Config"]}},"/api/v1/admin/payment-config/test":{"post":{"operationId":"PaymentConfigController_testConfig","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestPaymentConfigDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestPaymentResultDto"}}}}},"security":[{"bearer":[]}],"summary":"Test payment config by generating a sample QR code","tags":["Payment Config"]}},"/api/v1/admin/payment-config/banks":{"get":{"operationId":"PaymentConfigController_getSupportedBanks","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get list of supported banks","tags":["Payment Config"]}},"/api/v1/admin/payment-config/status":{"get":{"operationId":"PaymentConfigController_getStatus","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Check if tenant has valid payment config","tags":["Payment Config"]}},"/api/v1/auth/register/submit":{"post":{"description":"Validates registration data, stores temporarily in Redis, and sends OTP to email","operationId":"AuthController_registerSubmit","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterSubmitDto"}}}},"responses":{"200":{"description":"Registration data validated, OTP sent","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterSubmitResponseDto"}}}},"400":{"description":"Validation failed"},"409":{"description":"Email or slug already exists"}},"summary":"Step 1: Submit registration & receive OTP","tags":["Authentication"]}},"/api/v1/auth/register/confirm":{"post":{"description":"Verifies OTP, creates Tenant & User, returns auth tokens","operationId":"AuthController_registerConfirm","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterConfirmDto"}}}},"responses":{"201":{"description":"Account created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"400":{"description":"Invalid OTP or token expired"}},"summary":"Step 2: Confirm OTP & create account","tags":["Authentication"]}},"/api/v1/auth/login":{"post":{"description":"Authenticate user with email and password","operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"401":{"description":"Invalid credentials"}},"summary":"User login","tags":["Authentication"]}},"/api/v1/auth/refresh":{"post":{"description":"Generate new access token using valid refresh token","operationId":"AuthController_refresh","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"New access token generated","content":{"application/json":{"schema":{"properties":{"accessToken":{"type":"string"}}}}}},"401":{"description":"Invalid refresh token"}},"summary":"Refresh access token","tags":["Authentication"]}},"/api/v1/auth/logout":{"post":{"description":"Revoke refresh token and end session","operationId":"AuthController_logout","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutDto"}}}},"responses":{"204":{"description":"Logged out successfully"},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Logout user","tags":["Authentication"]}},"/api/v1/auth/logout-all":{"post":{"description":"Revoke all refresh tokens for the user","operationId":"AuthController_logoutAll","parameters":[],"responses":{"204":{"description":"Logged out from all devices"}},"security":[{"bearer":[]}],"summary":"Logout from all devices","tags":["Authentication"]}},"/api/v1/auth/me":{"get":{"description":"Retrieve authenticated user information and tenant details","operationId":"AuthController_getMe","parameters":[],"responses":{"200":{"description":"User profile retrieved","content":{"application/json":{"schema":{"properties":{"user":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"},"role":{"type":"string"},"tenantId":{"type":"string"}}},"tenant":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"slug":{"type":"string"},"status":{"type":"string"},"onboardingStep":{"type":"number"}}}}}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Get current user profile","tags":["Authentication"]}},"/api/v1/tenants/me":{"get":{"operationId":"TenantController_getCurrentTenant","parameters":[],"responses":{"200":{"description":"Tenant details retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get current tenant info","tags":["Tenants"]}},"/api/v1/tenants/me/pricing":{"get":{"operationId":"TenantController_getPricingSettings","parameters":[],"responses":{"200":{"description":"Pricing settings retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"currency":{"type":"string","example":"USD"},"tax":{"type":"object","properties":{"enabled":{"type":"boolean"},"rate":{"type":"number"},"label":{"type":"string"},"includedInPrice":{"type":"boolean"}}},"serviceCharge":{"type":"object","properties":{"enabled":{"type":"boolean"},"rate":{"type":"number"},"label":{"type":"string"}}},"tip":{"type":"object","properties":{"enabled":{"type":"boolean"},"suggestions":{"type":"array","items":{"type":"number"}},"allowCustom":{"type":"boolean"}}}}}}}}},"security":[{"bearer":[]}],"summary":"Get tenant pricing settings (tax, service charge, tip)","tags":["Tenants"]}},"/api/v1/tenants/public/{slug}/pricing":{"get":{"operationId":"TenantController_getPublicPricingSettings","parameters":[{"name":"slug","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Pricing settings for checkout"},"404":{"description":"Restaurant not found"}},"summary":"Get tenant pricing settings by slug (public)","tags":["Tenants"]}},"/api/v1/tenants/profile":{"patch":{"operationId":"TenantController_updateProfile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileDto"}}}},"responses":{"200":{"description":"Profile updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}},"409":{"description":"Slug already exists"}},"security":[{"bearer":[]}],"summary":"Update tenant profile (Onboarding Step 1)","tags":["Tenants"]}},"/api/v1/tenants/opening-hours":{"patch":{"operationId":"TenantController_updateOpeningHours","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOpeningHoursDto"}}}},"responses":{"200":{"description":"Opening hours updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update opening hours (Onboarding Step 2)","tags":["Tenants"]}},"/api/v1/tenants/settings":{"patch":{"operationId":"TenantController_updateSettings","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSettingsDto"}}}},"responses":{"200":{"description":"Settings updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update settings (Onboarding Step 3) - includes tax, service charge, tip config","tags":["Tenants"]}},"/api/v1/tenants/payment-config":{"patch":{"operationId":"TenantController_updatePaymentConfig","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePaymentConfigDto"}}}},"responses":{"200":{"description":"Payment config updated"}},"security":[{"bearer":[]}],"summary":"Update settings (Onboarding Step 4)","tags":["Tenants"]}},"/api/v1/tenants/complete-onboarding":{"post":{"operationId":"TenantController_completeOnboarding","parameters":[],"responses":{"200":{"description":"Tenant activated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Complete onboarding","tags":["Tenants"]}},"/api/v1/admin/tables":{"post":{"operationId":"TableController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTableDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}},"403":{"description":"Subscription limit exceeded"},"409":{"description":"Table number already exists"}},"security":[{"bearer":[]}],"summary":"Create new table with auto QR generation","tags":["Tables"]},"get":{"operationId":"TableController_findAll","parameters":[{"name":"activeOnly","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"status","required":false,"in":"query","schema":{"enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"],"type":"string"}},{"name":"location","required":false,"in":"query","schema":{"type":"string"}},{"name":"sortBy","required":false,"in":"query","schema":{"enum":["tableNumber","capacity","createdAt"],"type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"enum":["asc","desc"],"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableListResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get all tables with filters","tags":["Tables"]}},"/api/v1/admin/tables/locations":{"get":{"operationId":"TableController_getLocations","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"security":[{"bearer":[]}],"summary":"Get distinct locations for filter dropdown","tags":["Tables"]}},"/api/v1/admin/tables/{id}":{"get":{"operationId":"TableController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}},"404":{"description":"Table not found"}},"security":[{"bearer":[]}],"summary":"Get table by ID","tags":["Tables"]},"put":{"operationId":"TableController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTableDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}},"404":{"description":"Table not found"},"409":{"description":"Table number already exists"}},"security":[{"bearer":[]}],"summary":"Update table","tags":["Tables"]},"delete":{"operationId":"TableController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Table deleted successfully"},"409":{"description":"Cannot delete table with active orders"}},"security":[{"bearer":[]}],"summary":"Delete table (soft delete)","tags":["Tables"]}},"/api/v1/admin/tables/{id}/status":{"patch":{"operationId":"TableController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"status":{"enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update table status only","tags":["Tables"]}},"/api/v1/admin/tables/{id}/qr/generate":{"post":{"operationId":"TableController_regenerateQr","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegenerateQrResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Regenerate QR code for table","tags":["Tables"]}},"/api/v1/admin/tables/qr/regenerate-all":{"post":{"description":"Regenerates QR codes for all active tables. Old QR codes will be invalidated. Requires OWNER role.","operationId":"TableController_bulkRegenerateAllQr","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkRegenerateQrResponseDto"}}}},"400":{"description":"No active tables found"}},"security":[{"bearer":[]}],"summary":"Bulk regenerate QR codes for all tables","tags":["Tables"]}},"/api/v1/admin/tables/{id}/qr/download":{"get":{"operationId":"TableController_downloadQr","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"format","required":false,"in":"query","description":"Default: png","schema":{"enum":["png","svg","pdf"],"type":"string"}}],"responses":{"200":{"description":"QR code file"}},"security":[{"bearer":[]}],"summary":"Download QR code (PNG/SVG/PDF)","tags":["Tables"]}},"/api/v1/admin/tables/qr/download-all":{"get":{"operationId":"TableController_downloadAllQr","parameters":[{"name":"format","required":false,"in":"query","description":"Default: zip","schema":{"enum":["zip","pdf"],"type":"string"}}],"responses":{"200":{"description":"ZIP file or PDF with all QR codes"}},"security":[{"bearer":[]}],"summary":"Download all QR codes (ZIP or multi-page PDF)","tags":["Tables"]}},"/api/v1/admin/tables/bulk/status":{"patch":{"operationId":"TableController_bulkUpdateStatus","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"tableIds":{"type":"array","items":{"type":"string"}},"status":{"enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"properties":{"updated":{"type":"number"}}}}}}},"security":[{"bearer":[]}],"summary":"Bulk update table status","tags":["Tables"]}},"/api/v1/admin/tables/{id}/clear":{"post":{"description":"Staff marks table as cleared. Deactivates active session and frees the table.","operationId":"TableController_clearTable","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"properties":{"message":{"type":"string","example":"Table cleared successfully"},"tableId":{"type":"string"},"clearedAt":{"type":"string","format":"date-time"},"clearedBy":{"type":"string"}}}}}},"404":{"description":"No active session for this table"}},"security":[{"bearer":[]}],"summary":"Clear table (Haidilao style)","tags":["Tables"]}},"/api/v1/admin/tables/sessions/active":{"get":{"description":"Returns all tables currently in use with session info","operationId":"TableController_getActiveSessions","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"properties":{"sessionId":{"type":"string"},"tableId":{"type":"string"},"tableNumber":{"type":"string"},"scannedAt":{"type":"string","format":"date-time"}}}}}}}},"security":[{"bearer":[]}],"summary":"Get all active sessions (for monitoring)","tags":["Tables"]}},"/api/v1/t/{qrToken}":{"get":{"description":"Customer scans QR code, creates session, sets cookie, and redirects to menu","operationId":"PublicTableController_scanQr","parameters":[{"name":"qrToken","required":true,"in":"path","description":"QR token from scanned code","schema":{"type":"string"}}],"responses":{"302":{"description":"Redirect to /menu with session cookie"},"400":{"description":"Invalid QR token"},"409":{"description":"Table is already in use"}},"summary":"Scan QR code (Haidilao style)","tags":["Tables - Public"]}},"/api/v1/session":{"get":{"description":"Returns table info for current session","operationId":"PublicTableController_getSessionInfo","parameters":[],"responses":{"200":{"description":""},"401":{"description":"Session invalid or expired"}},"security":[{"table_session_id":[]}],"summary":"Get current session information","tags":["Tables - Public"]}},"/api/v1/menu":{"get":{"description":"Returns menu based on session cookie (no QR token needed)","operationId":"PublicTableController_getMenu","parameters":[],"responses":{"200":{"description":""},"401":{"description":"Session invalid or expired"}},"security":[{"table_session_id":[]}],"summary":"Get menu for current session","tags":["Tables - Public"]}},"/api/v1/cart/items":{"post":{"operationId":"CartController_addToCart","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddToCartDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponseDto"}}}}},"security":[{"table_session_id":[]}],"summary":"Add item to cart","tags":["Cart"]}},"/api/v1/cart":{"get":{"operationId":"CartController_getCart","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponseDto"}}}}},"security":[{"table_session_id":[]}],"summary":"Get cart for current session","tags":["Cart"]},"delete":{"operationId":"CartController_clearCart","parameters":[],"responses":{"204":{"description":""}},"security":[{"table_session_id":[]}],"summary":"Clear cart","tags":["Cart"]}},"/api/v1/cart/items/{itemId}":{"patch":{"operationId":"CartController_updateCartItem","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCartItemDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponseDto"}}}}},"security":[{"table_session_id":[]}],"summary":"Update cart item quantity","tags":["Cart"]},"delete":{"operationId":"CartController_removeCartItem","parameters":[{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponseDto"}}}}},"security":[{"table_session_id":[]}],"summary":"Remove item from cart","tags":["Cart"]}},"/api/v1/checkout":{"post":{"operationId":"OrderController_checkout","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}}},"security":[{"table_session_id":[]}],"summary":"Checkout and create order from cart","tags":["Orders"]}},"/api/v1/orders/table/{tableId}":{"get":{"operationId":"OrderController_getTableOrders","parameters":[{"name":"tableId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponseDto"}}}}}},"security":[{"table_session_id":[]}],"summary":"Get orders for current table (customer view)","tags":["Orders"]}},"/api/v1/tracking/{orderId}":{"get":{"description":"Real-time order status tracking for customers with timeline and ETA","operationId":"OrderController_getOrderTracking","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"orderId":{"type":"string"},"orderNumber":{"type":"string"},"tableNumber":{"type":"string"},"currentStatus":{"type":"string"},"currentStatusMessage":{"type":"string"},"timeline":{"type":"array","items":{"type":"object","properties":{"status":{"type":"string"},"label":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"completed":{"type":"boolean"},"description":{"type":"string"}}}},"estimatedTimeRemaining":{"type":"number"},"elapsedMinutes":{"type":"number"},"createdAt":{"type":"string","format":"date-time"}}}}}}},"security":[{"table_session_id":[]}],"summary":"Get order tracking info (customer view)","tags":["Orders"]}},"/api/v1/orders/{orderId}/cancel":{"post":{"description":"Customers can cancel their own order within 5 minutes if kitchen has not started","operationId":"OrderController_customerCancelOrder","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}},"400":{"description":"Cancellation window expired or order already preparing"}},"security":[{"table_session_id":[]}],"summary":"Cancel order (customer self-service)","tags":["Orders"]}},"/api/v1/admin/orders":{"get":{"operationId":"OrderController_getOrders","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}},{"name":"status","required":false,"in":"query","schema":{"type":"string"}},{"name":"tableId","required":false,"in":"query","schema":{"type":"string"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get all orders with filters (staff/admin)","tags":["Orders"]}},"/api/v1/admin/orders/{orderId}":{"get":{"operationId":"OrderController_getOrderById","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get order by ID (staff/admin)","tags":["Orders"]}},"/api/v1/admin/orders/{orderId}/status":{"patch":{"operationId":"OrderController_updateOrderStatus","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrderStatusDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update order status (staff action)","tags":["Orders"]}},"/api/v1/admin/orders/{orderId}/cancel":{"post":{"operationId":"OrderController_cancelOrder","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Cancel order (staff action)","tags":["Orders"]}},"/api/v1/admin/orders/{orderId}/items/{itemId}/prepared":{"patch":{"operationId":"OrderController_markItemPrepared","parameters":[{"name":"orderId","required":true,"in":"path","schema":{"type":"string"}},{"name":"itemId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":""}},"security":[{"bearer":[]}],"summary":"Mark order item as prepared (KDS)","tags":["Orders"]}},"/api/v1/admin/kds/orders/active":{"get":{"description":"Returns orders in PREPARING status, sorted by elapsed time and priority","operationId":"KdsController_getActiveOrders","parameters":[],"responses":{"200":{"description":"Orders grouped by priority level","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KdsOrdersResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get active orders for KDS (categorized by priority)","tags":["KDS - Kitchen Display"]}},"/api/v1/admin/kds/stats":{"get":{"description":"Real-time statistics for kitchen performance","operationId":"KdsController_getKdsStats","parameters":[],"responses":{"200":{"description":"Kitchen performance statistics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KdsStatsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get KDS statistics","tags":["KDS - Kitchen Display"]}},"/api/v1/admin/analytics/overview":{"get":{"operationId":"AnalyticsController_getOverview","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get dashboard overview stats","tags":["Analytics"]}},"/api/v1/admin/analytics/revenue":{"get":{"operationId":"AnalyticsController_getRevenue","parameters":[{"name":"from","required":false,"in":"query","description":"Start date (YYYY-MM-DD)","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","description":"End date (YYYY-MM-DD)","schema":{"type":"string"}},{"name":"groupBy","required":false,"in":"query","schema":{"enum":["day","week","month"],"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get revenue by date range","tags":["Analytics"]}},"/api/v1/admin/analytics/orders":{"get":{"operationId":"AnalyticsController_getOrderStats","parameters":[{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get orders statistics","tags":["Analytics"]}},"/api/v1/admin/analytics/popular-items":{"get":{"operationId":"AnalyticsController_getPopularItems","parameters":[{"name":"limit","required":false,"in":"query","description":"Number of items (default 10)","schema":{"type":"number"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get top selling menu items","tags":["Analytics"]}},"/api/v1/admin/analytics/hourly-distribution":{"get":{"operationId":"AnalyticsController_getHourlyDistribution","parameters":[{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get orders distribution by hour of day","tags":["Analytics"]}},"/api/v1/admin/analytics/table-performance":{"get":{"operationId":"AnalyticsController_getTablePerformance","parameters":[{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get performance metrics per table","tags":["Analytics"]}},"/api/v1/admin/staff/invite":{"post":{"operationId":"StaffController_inviteStaff","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteStaffDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteStaffResponseDto"}}}},"403":{"description":"Subscription limit exceeded"},"409":{"description":"User already exists or invitation pending"}},"security":[{"bearer":[]}],"summary":"Invite a new staff member","tags":["Staff Management"]}},"/api/v1/admin/staff":{"get":{"operationId":"StaffController_listStaff","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListStaffResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"List all staff members","tags":["Staff Management"]}},"/api/v1/admin/staff/invitations":{"get":{"operationId":"StaffController_listPendingInvitations","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListInvitationsResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"List pending invitations","tags":["Staff Management"]}},"/api/v1/admin/staff/{staffId}/role":{"patch":{"operationId":"StaffController_updateStaffRole","parameters":[{"name":"staffId","required":true,"in":"path","description":"Staff member ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStaffRoleDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StaffMemberDto"}}}}},"security":[{"bearer":[]}],"summary":"Update staff member role","tags":["Staff Management"]}},"/api/v1/admin/staff/{staffId}":{"delete":{"operationId":"StaffController_removeStaff","parameters":[{"name":"staffId","required":true,"in":"path","description":"Staff member ID","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveStaffResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Remove staff member","tags":["Staff Management"]}},"/api/v1/admin/staff/invitations/{invitationId}":{"delete":{"operationId":"StaffController_cancelInvitation","parameters":[{"name":"invitationId","required":true,"in":"path","description":"Invitation ID","schema":{"type":"string"}}],"responses":{"204":{"description":"Invitation cancelled"}},"security":[{"bearer":[]}],"summary":"Cancel pending invitation","tags":["Staff Management"]}},"/api/v1/admin/staff/invitations/{invitationId}/resend":{"post":{"operationId":"StaffController_resendInvitation","parameters":[{"name":"invitationId","required":true,"in":"path","description":"Invitation ID","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendInviteResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Resend invitation email","tags":["Staff Management"]}},"/api/v1/admin/staff/verify-invite":{"get":{"operationId":"StaffController_verifyInviteToken","parameters":[{"name":"token","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyInviteTokenResponseDto"}}}}},"summary":"Verify invitation token validity","tags":["Staff Management"]}},"/api/v1/admin/staff/accept-invite":{"post":{"operationId":"StaffController_acceptInvitation","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AcceptInviteDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AcceptInviteResponseDto"}}}},"400":{"description":"Invitation expired or already used"}},"summary":"Accept invitation and create account","tags":["Staff Management"]}},"/api/v1/orders/{orderId}/items/{itemId}/review":{"post":{"operationId":"ReviewController_createReview","parameters":[{"name":"orderId","required":true,"in":"path","description":"Order ID","schema":{"type":"string"}},{"name":"itemId","required":true,"in":"path","description":"Order Item ID","schema":{"type":"string"}},{"name":"sessionId","required":true,"in":"query","description":"Customer session ID","schema":{"type":"string"}},{"name":"tenantId","required":true,"in":"query","description":"Tenant ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReviewDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponseDto"}}}}},"summary":"Create or update a review for an order item","tags":["Reviews"]}},"/api/v1/orders/{orderId}/reviews":{"get":{"operationId":"ReviewController_getOrderReviews","parameters":[{"name":"orderId","required":true,"in":"path","description":"Order ID","schema":{"type":"string"}},{"name":"tenantId","required":true,"in":"query","description":"Tenant ID","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderReviewSummaryDto"}}}}},"summary":"Get all reviews for an order","tags":["Reviews"]}},"/api/v1/menu-items/{menuItemId}/reviews":{"get":{"operationId":"ReviewController_getMenuItemReviews","parameters":[{"name":"menuItemId","required":true,"in":"path","description":"Menu Item ID","schema":{"type":"string"}},{"name":"tenantId","required":true,"in":"query","description":"Tenant ID","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemReviewStatsDto"}}}}},"summary":"Get review statistics for a menu item","tags":["Reviews"]}},"/api/v1/admin/reviews/stats":{"get":{"operationId":"ReviewController_getTenantReviewStats","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantReviewStatsDto"}}}}},"security":[{"bearer":[]}],"summary":"Get tenant-wide review statistics","tags":["Reviews"]}},"/api/v1/admin/reviews":{"get":{"operationId":"ReviewController_getRecentReviews","parameters":[{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get recent reviews for tenant","tags":["Reviews"]}},"/api/v1/admin/promotions":{"post":{"operationId":"PromotionController_createPromotion","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePromotionDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionResponseDto"}}}},"403":{"description":"Promotions feature not available in your plan"}},"security":[{"bearer":[]}],"summary":"Create a new promotion","tags":["Promotions"]},"get":{"operationId":"PromotionController_getPromotions","parameters":[{"name":"page","required":false,"in":"query","schema":{"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"default":20,"type":"number"}},{"name":"active","required":false,"in":"query","description":"Filter by active status","schema":{"type":"boolean"}},{"name":"includeExpired","required":false,"in":"query","description":"Include expired promotions","schema":{"type":"boolean"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"List all promotions","tags":["Promotions"]}},"/api/v1/admin/promotions/{id}":{"get":{"operationId":"PromotionController_getPromotion","parameters":[{"name":"id","required":true,"in":"path","description":"Promotion ID","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Get a single promotion","tags":["Promotions"]},"put":{"operationId":"PromotionController_updatePromotion","parameters":[{"name":"id","required":true,"in":"path","description":"Promotion ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePromotionDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"Update a promotion","tags":["Promotions"]},"delete":{"operationId":"PromotionController_deletePromotion","parameters":[{"name":"id","required":true,"in":"path","description":"Promotion ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Promotion deleted successfully"}},"security":[{"bearer":[]}],"summary":"Delete a promotion (only if never used)","tags":["Promotions"]}},"/api/v1/checkout/validate-promo":{"post":{"operationId":"PromotionController_validatePromoCode","parameters":[{"name":"tenantId","required":true,"in":"query","description":"Tenant ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidatePromoDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidatePromoResponseDto"}}}}},"summary":"Validate a promotion code at checkout","tags":["Promotions"]}}},"info":{"title":"QR Ordering API","description":"API Documentation for QR Ordering Platform","version":"1.0","contact":{}},"tags":[{"name":"Authentication","description":"User authentication & registration"},{"name":"Tenants","description":"Restaurant/tenant management"},{"name":"Menu - Categories","description":"Menu categories management"},{"name":"Menu - Items","description":"Menu items management"},{"name":"Menu - Modifiers","description":"Menu item modifiers management"},{"name":"Menu - Photos","description":"Menu photo management"},{"name":"Menu - Public","description":"Menu public management"},{"name":"Tables","description":"Table management & QR codes"},{"name":"Tables - Public","description":"Table QR code scanning and session management"},{"name":"Cart","description":"Customer cart management"},{"name":"Orders","description":"Order placement & management"},{"name":"Payments","description":"Payment processing"}],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"},"cookie":{"type":"apiKey","in":"cookie","name":"table_session_id"}},"schemas":{"CreateMenuCategoryDto":{"type":"object","properties":{"name":{"type":"string","example":"Appetizers"},"description":{"type":"string","example":"Start your meal with these delicious appetizers"},"displayOrder":{"type":"number","example":1},"active":{"type":"boolean","example":true}},"required":["name"]},"MenuCategoryResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"displayOrder":{"type":"number"},"active":{"type":"boolean"},"itemCount":{"type":"number"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","displayOrder","active","itemCount","createdAt","updatedAt"]},"UpdateMenuCategoryDto":{"type":"object","properties":{"name":{"type":"string","example":"Starters"},"description":{"type":"string"},"displayOrder":{"type":"number"},"active":{"type":"boolean"}}},"CreateMenuItemDto":{"type":"object","properties":{"name":{"type":"string","example":"Spring Rolls"},"description":{"type":"string","example":"Fresh vegetable spring rolls with sweet chili sauce"},"categoryId":{"type":"string","example":"cat_1"},"price":{"type":"number","example":50000},"preparationTime":{"type":"number","example":15,"minimum":0,"maximum":240},"chefRecommended":{"type":"boolean","example":true},"imageUrl":{"type":"string","example":"https://cdn.example.com/spring-rolls.jpg"},"tags":{"example":["popular","vegetarian"],"type":"array","items":{"type":"string"}},"allergens":{"example":["gluten"],"type":"array","items":{"type":"string"}},"displayOrder":{"type":"number","example":1},"modifierGroupIds":{"example":["mod_1","mod_2"],"type":"array","items":{"type":"string"}}},"required":["name","categoryId","price"]},"ModifierOptionResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"priceDelta":{"type":"number"},"displayOrder":{"type":"number"},"active":{"type":"boolean"}},"required":["id","name","priceDelta","displayOrder","active"]},"ModifierGroupResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"type":{"type":"string"},"required":{"type":"boolean"},"minChoices":{"type":"number"},"maxChoices":{"type":"number"},"displayOrder":{"type":"number"},"active":{"type":"boolean"},"options":{"type":"array","items":{"$ref":"#/components/schemas/ModifierOptionResponseDto"}}},"required":["id","name","type","required","minChoices","displayOrder","active","options"]},"MenuItemPhotoResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"photo_123","description":"Menu photo ID"},"url":{"type":"string","example":"https://example.com/photo.jpg","description":"Menu photo URL"},"filename":{"type":"string","example":"photo.jpg","description":"Photo file name"},"mimeType":{"type":"string","example":"image/jpeg","description":"Photo MIME type"},"size":{"type":"number","example":204800,"description":"Photo file size (bytes)"},"displayOrder":{"type":"number","example":1,"description":"Photo display order"},"isPrimary":{"type":"boolean","example":true,"description":"Is primary menu photo"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-22T10:00:00.000Z","description":"Photo creation time"}},"required":["id","url","filename","mimeType","size","displayOrder","isPrimary","createdAt"]},"MenuItemResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"categoryId":{"type":"string"},"price":{"type":"number"},"preparationTime":{"type":"number","example":15,"minimum":0,"maximum":240},"chefRecommended":{"type":"boolean"},"imageUrl":{"type":"string"},"status":{"type":"string"},"available":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"}},"allergens":{"type":"array","items":{"type":"string"}},"displayOrder":{"type":"number"},"category":{"$ref":"#/components/schemas/MenuCategoryResponseDto"},"modifierGroups":{"type":"array","items":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}},"photos":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"publishedAt":{"format":"date-time","type":"string"}},"required":["id","name","categoryId","price","preparationTime","chefRecommended","status","available","displayOrder","createdAt","updatedAt"]},"UpdateMenuItemDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"categoryId":{"type":"string"},"price":{"type":"number"},"preparationTime":{"type":"number"},"chefRecommended":{"type":"boolean"},"imageUrl":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"allergens":{"type":"array","items":{"type":"string"}},"displayOrder":{"type":"number"},"available":{"type":"boolean"},"modifierGroupIds":{"type":"array","items":{"type":"string"}}}},"PublishMenuItemDto":{"type":"object","properties":{"publish":{"type":"boolean","example":true}},"required":["publish"]},"ToggleAvailabilityDto":{"type":"object","properties":{"available":{"type":"boolean","example":true}},"required":["available"]},"ModifierOptionDto":{"type":"object","properties":{"id":{"type":"string","example":"opt_1"},"name":{"type":"string","example":"Small"},"priceDelta":{"type":"number","example":-10000},"displayOrder":{"type":"number","example":1}},"required":["name","priceDelta","displayOrder"]},"CreateModifierGroupDto":{"type":"object","properties":{"name":{"type":"string","example":"Size"},"description":{"type":"string","example":"Choose your preferred size"},"type":{"type":"string","enum":["SINGLE_CHOICE","MULTI_CHOICE"],"example":"SINGLE_CHOICE","description":"SINGLE_CHOICE: radio button | MULTI_CHOICE: checkboxes"},"required":{"type":"boolean","example":true,"description":"If true, customer must select at least 1 option"},"minChoices":{"type":"number","example":1,"description":"Minimum options customer must select. If required=true, must be >= 1"},"maxChoices":{"type":"number","example":3,"description":"Maximum options customer can select. For SINGLE_CHOICE must be 1, for MULTI_CHOICE must be >= minChoices"},"displayOrder":{"type":"number","example":0},"options":{"example":[{"name":"Small","priceDelta":-10000,"displayOrder":1},{"name":"Medium","priceDelta":0,"displayOrder":2},{"name":"Large","priceDelta":15000,"displayOrder":3}],"description":"Must have at least 2 options","type":"array","items":{"$ref":"#/components/schemas/ModifierOptionDto"}}},"required":["name","type","required","options"]},"UpdateModifierGroupDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"type":{"type":"string","enum":["SINGLE_CHOICE","MULTI_CHOICE"],"description":"SINGLE_CHOICE: radio button | MULTI_CHOICE: checkboxes"},"required":{"type":"boolean","description":"If true, customer must select at least 1 option"},"minChoices":{"type":"number","description":"Minimum options customer must select. If required=true, must be >= 1"},"maxChoices":{"type":"number","description":"Maximum options customer can select. For SINGLE_CHOICE must be 1, for MULTI_CHOICE must be >= minChoices"},"displayOrder":{"type":"number"},"active":{"type":"boolean"},"options":{"type":"array","items":{"$ref":"#/components/schemas/ModifierOptionDto"}}}},"PublicMenuItemDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"price":{"type":"number"},"imageUrl":{"type":"string"},"primaryPhoto":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"},"photos":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemPhotoResponseDto"}},"available":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"}},"allergens":{"type":"array","items":{"type":"string"}},"modifierGroups":{"type":"array","items":{"$ref":"#/components/schemas/ModifierGroupResponseDto"}},"preparationTime":{"type":"number"},"chefRecommended":{"type":"boolean"},"popularity":{"type":"number"},"displayOrder":{"type":"number"}},"required":["id","name","price","available","modifierGroups","preparationTime","chefRecommended","popularity","displayOrder"]},"PublicMenuCategoryDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"displayOrder":{"type":"number"},"items":{"type":"array","items":{"$ref":"#/components/schemas/PublicMenuItemDto"}}},"required":["id","name","displayOrder","items"]},"PaginationMetaDto":{"type":"object","properties":{"page":{"type":"number"},"limit":{"type":"number"},"total":{"type":"number"},"totalPages":{"type":"number"},"hasNext":{"type":"boolean"},"hasPrevious":{"type":"boolean"}},"required":["page","limit","total","totalPages","hasNext","hasPrevious"]},"PublicMenuResponseDto":{"type":"object","properties":{"categories":{"type":"array","items":{"$ref":"#/components/schemas/PublicMenuCategoryDto"}},"pagination":{"$ref":"#/components/schemas/PaginationMetaDto"},"publishedAt":{"format":"date-time","type":"string"}},"required":["categories","pagination","publishedAt"]},"UploadPhotoDto":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]},"UpdatePhotoDto":{"type":"object","properties":{"displayOrder":{"type":"number"}}},"CreateSubscriptionPaymentDto":{"type":"object","properties":{"targetTier":{"type":"string","enum":["FREE","BASIC","PREMIUM"],"description":"Target subscription tier to upgrade to","example":"BASIC"},"returnUrl":{"type":"string","description":"Return URL after successful payment","example":"https://app.example.com/subscription/success"},"cancelUrl":{"type":"string","description":"Cancel URL if payment is cancelled","example":"https://app.example.com/subscription/cancel"}},"required":["targetTier"]},"SubscriptionPaymentResponseDto":{"type":"object","properties":{"paymentId":{"type":"string","description":"Payment ID"},"upgradeRequestId":{"type":"string","description":"Subscription upgrade request ID"},"targetPlan":{"type":"string","description":"Target plan name"},"targetTier":{"type":"string","enum":["FREE","BASIC","PREMIUM"],"description":"Target tier"},"amountUSD":{"type":"number","description":"Amount in USD"},"amountVND":{"type":"number","description":"Amount in VND (for payment)"},"qrContent":{"type":"string","description":"VietQR code content"},"deepLink":{"type":"string","description":"Deep link to banking app"},"transferContent":{"type":"string","description":"Transfer content for bank transfer"},"accountNumber":{"type":"string","description":"Bank account number to transfer to"},"accountName":{"type":"string","description":"Bank account name"},"bankCode":{"type":"string","description":"Bank code"},"status":{"type":"string","enum":["PENDING","PROCESSING","COMPLETED","FAILED","REFUNDED"],"description":"Payment status"},"expiresAt":{"format":"date-time","type":"string","description":"Payment expiration time"},"createdAt":{"format":"date-time","type":"string","description":"Payment creation time"}},"required":["paymentId","upgradeRequestId","targetPlan","targetTier","amountUSD","amountVND","qrContent","transferContent","accountNumber","accountName","bankCode","status","expiresAt","createdAt"]},"SubscriptionPaymentStatusDto":{"type":"object","properties":{"paymentId":{"type":"string","description":"Payment ID"},"status":{"type":"string","enum":["PENDING","PROCESSING","COMPLETED","FAILED","REFUNDED"],"description":"Payment status"},"subscriptionUpgraded":{"type":"boolean","description":"Whether subscription was upgraded"},"currentTier":{"type":"string","enum":["FREE","BASIC","PREMIUM"],"description":"Current tier (after upgrade if successful)"},"transactionId":{"type":"string","description":"Transaction ID from provider"},"paidAt":{"format":"date-time","type":"string","description":"Payment completion time"},"errorMessage":{"type":"string","description":"Error message if failed"}},"required":["paymentId","status","subscriptionUpgraded"]},"CreatePaymentIntentDto":{"type":"object","properties":{"orderId":{"type":"string","description":"Order ID to create payment for","example":"e8f9a0b1-2c3d-4e5f-6a7b-8c9d0e1f2a3b"},"returnUrl":{"type":"string","description":"Return URL after payment completion","example":"https://app.restaurant.com/order/success"},"cancelUrl":{"type":"string","description":"Cancel URL if payment is cancelled","example":"https://app.restaurant.com/order/cancel"}},"required":["orderId","returnUrl"]},"PaymentIntentResponseDto":{"type":"object","properties":{"paymentId":{"type":"string","description":"Payment ID","example":"f1a2b3c4-5d6e-7f8a-9b0c-1d2e3f4a5b6c"},"orderId":{"type":"string","description":"Order ID","example":"e8f9a0b1-2c3d-4e5f-6a7b-8c9d0e1f2a3b"},"amount":{"type":"number","description":"Payment amount in VND","example":250000},"currency":{"type":"string","description":"Currency code","example":"VND"},"qrContent":{"type":"string","description":"QR code content for VietQR","example":"00020101021238570010A000000727012700069704220114706012345678900208QRIBFTTA53037045802VN62150811Order1234630445B5"},"deepLink":{"type":"string","description":"Deep link to banking app","example":"vietqr://payment?amount=250000&account=1234567890"},"transferContent":{"type":"string","description":"Transfer content/description","example":"DH123456"},"accountNumber":{"type":"string","description":"Bank account number to transfer to","example":"1234567890"},"bankCode":{"type":"string","description":"Bank code","example":"VCB"},"status":{"type":"string","description":"Payment status","enum":["PENDING","PROCESSING","COMPLETED","FAILED","REFUNDED"],"example":"PENDING"},"expiresAt":{"format":"date-time","type":"string","description":"Payment expiration time","example":"2026-01-11T06:00:00.000Z"},"createdAt":{"format":"date-time","type":"string","description":"Payment creation time","example":"2026-01-11T05:45:00.000Z"}},"required":["paymentId","orderId","amount","currency","qrContent","transferContent","accountNumber","bankCode","status","expiresAt","createdAt"]},"PaymentStatusResponseDto":{"type":"object","properties":{"paymentId":{"type":"string","description":"Payment ID","example":"f1a2b3c4-5d6e-7f8a-9b0c-1d2e3f4a5b6c"},"orderId":{"type":"string","description":"Order ID","example":"e8f9a0b1-2c3d-4e5f-6a7b-8c9d0e1f2a3b"},"method":{"type":"string","description":"Payment method","enum":["BILL_TO_TABLE","SEPAY_QR","CARD_ONLINE","CASH"],"example":"SEPAY_QR"},"status":{"type":"string","description":"Payment status","enum":["PENDING","PROCESSING","COMPLETED","FAILED","REFUNDED"],"example":"COMPLETED"},"amount":{"type":"number","description":"Payment amount","example":250000},"currency":{"type":"string","description":"Currency","example":"VND"},"transactionId":{"type":"string","description":"Transaction ID from provider","example":"TXN123456789"},"paidAt":{"format":"date-time","type":"string","description":"Payment completion time","example":"2026-01-11T05:50:00.000Z"},"failureReason":{"type":"string","description":"Failure reason if payment failed","example":"Insufficient funds"},"orderStatus":{"type":"string","description":"Order status","enum":["PENDING","RECEIVED","PREPARING","READY","SERVED","COMPLETED","PAID","CANCELLED"],"example":"RECEIVED"},"expiresAt":{"format":"date-time","type":"string","description":"Payment expiration time","example":"2026-01-11T06:00:00.000Z"},"createdAt":{"format":"date-time","type":"string","description":"Payment creation time","example":"2026-01-11T05:45:00.000Z"}},"required":["paymentId","orderId","method","status","amount","currency","orderStatus","expiresAt","createdAt"]},"PaymentWebhookDto":{"type":"object","properties":{"transactionId":{"type":"string","description":"SePay transaction ID","example":"TXN123456789"},"transferContent":{"type":"string","description":"Transfer content that matches order","example":"DH123456"},"amount":{"type":"number","description":"Amount received","example":250000},"bankCode":{"type":"string","description":"Bank code","example":"VCB"},"accountNumber":{"type":"string","description":"Account number that received payment","example":"1234567890"},"status":{"type":"string","description":"Transaction status","example":"success"},"transactionTime":{"type":"string","description":"Transaction timestamp","example":"2026-01-11T05:50:00.000Z"},"signature":{"type":"string","description":"Webhook signature for verification","example":"a1b2c3d4e5f6..."},"metadata":{"type":"object","description":"Additional data from SePay"}},"required":["transactionId","transferContent","amount","bankCode","accountNumber","status","transactionTime","signature"]},"SepayTransactionDto":{"type":"object","properties":{"id":{"type":"string","description":"Transaction ID from SePay"},"amount":{"type":"number","description":"Transaction amount"},"accountNumber":{"type":"string","description":"Bank account number"},"transferContent":{"type":"string","description":"Transfer content/description"},"transactionTime":{"format":"date-time","type":"string","description":"Transaction time"},"bankCode":{"type":"string","description":"Bank code"},"senderAccountNumber":{"type":"string","description":"Sender account number"},"senderName":{"type":"string","description":"Sender name"}},"required":["id","amount","accountNumber","transferContent","transactionTime","bankCode"]},"PollTransactionsResponseDto":{"type":"object","properties":{"success":{"type":"boolean","description":"Whether polling was successful"},"transactions":{"description":"List of transactions found","type":"array","items":{"$ref":"#/components/schemas/SepayTransactionDto"}},"matchedTransaction":{"description":"Message if any specific transaction matched","allOf":[{"$ref":"#/components/schemas/SepayTransactionDto"}]},"paymentProcessed":{"type":"boolean","description":"Whether payment was found and processed"},"polledAt":{"format":"date-time","type":"string","description":"Timestamp of poll"}},"required":["success","transactions","polledAt"]},"CheckPaymentResponseDto":{"type":"object","properties":{"found":{"type":"boolean","description":"Payment found status"},"status":{"type":"string","description":"Payment status"},"completed":{"type":"boolean","description":"Whether payment is completed"},"transaction":{"description":"Transaction details if found","allOf":[{"$ref":"#/components/schemas/SepayTransactionDto"}]},"message":{"type":"string","description":"Message"}},"required":["found","completed","message"]},"PaymentConfigResponseDto":{"type":"object","properties":{"id":{"type":"string"},"tenantId":{"type":"string"},"sepayEnabled":{"type":"boolean"},"sepayApiKeyMasked":{"type":"string","description":"Masked API key (last 4 chars only)"},"sepayAccountNo":{"type":"string"},"sepayAccountName":{"type":"string"},"sepayBankCode":{"type":"string"},"webhookEnabled":{"type":"boolean"},"webhookSecretMasked":{"type":"string","description":"Webhook secret (masked)"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","tenantId","sepayEnabled","webhookEnabled","createdAt","updatedAt"]},"UpdatePaymentConfigDto":{"type":"object","properties":{"sepayEnabled":{"type":"boolean","description":"Enable SePay for this tenant"},"sepayApiKey":{"type":"string","description":"SePay API Key (will be encrypted)","minLength":10},"sepayAccountNo":{"type":"string","description":"Bank account number"},"sepayAccountName":{"type":"string","description":"Bank account holder name"},"sepayBankCode":{"type":"string","description":"Bank code (e.g., MB, VCB, ACB)","maxLength":20},"webhookSecret":{"type":"string","description":"Webhook secret for verification"},"webhookEnabled":{"type":"boolean","description":"Enable webhook notifications"}}},"TestPaymentConfigDto":{"type":"object","properties":{"amount":{"type":"number","description":"Amount to test with (VND)","example":10000}},"required":["amount"]},"TestPaymentResultDto":{"type":"object","properties":{"success":{"type":"boolean"},"qrCodeUrl":{"type":"string"},"error":{"type":"string"}},"required":["success"]},"RegisterSubmitDto":{"type":"object","properties":{"email":{"type":"string","example":"owner@restaurant.com"},"password":{"type":"string","example":"StrongPassword!123","minLength":8},"fullName":{"type":"string","example":"Nguyen Van A"},"tenantName":{"type":"string","example":"Pho Ngon 123"},"slug":{"type":"string","example":"pho-ngon-123"}},"required":["email","password","fullName","tenantName","slug"]},"RegisterSubmitResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Validation successful. OTP sent to email."},"registrationToken":{"type":"string","example":"a1b2c3d4-..."},"expiresIn":{"type":"number","example":600}},"required":["message","registrationToken","expiresIn"]},"RegisterConfirmDto":{"type":"object","properties":{"registrationToken":{"type":"string","example":"a1b2c3d4-e5f6-..."},"otp":{"type":"string","example":"123456"}},"required":["registrationToken","otp"]},"AuthUserResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"uuid-user-1"},"email":{"type":"string","example":"owner@restaurant.com"},"fullName":{"type":"string","example":"Nguyen Van A"},"role":{"type":"string","example":"OWNER","enum":["OWNER","STAFF","KITCHEN"]},"tenantId":{"type":"string","example":"uuid-tenant-1"}},"required":["id","email","fullName","role"]},"AuthTenantResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"uuid-tenant-1"},"name":{"type":"string","example":"Pho Ngon 123"},"slug":{"type":"string","example":"pho-ngon-123"},"status":{"type":"string","example":"ACTIVE","enum":["DRAFT","ACTIVE","SUSPENDED"]},"onboardingStep":{"type":"number","example":1}},"required":["id","name","slug","status","onboardingStep"]},"AuthResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","example":"eyJhbGciOiJIUzI1Ni..."},"refreshToken":{"type":"string","example":"d792f321-..."},"expiresIn":{"type":"number","example":3600,"description":"Access token expiration time in seconds"},"user":{"$ref":"#/components/schemas/AuthUserResponseDto"},"tenant":{"$ref":"#/components/schemas/AuthTenantResponseDto"}},"required":["accessToken","refreshToken","expiresIn","user"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"owner@restaurant.com"},"password":{"type":"string","example":"StrongPassword!123"},"deviceInfo":{"type":"string","example":"Chrome 120 on MacOS"}},"required":["email","password"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"LogoutDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"TenantResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"slug":{"type":"string"},"status":{"type":"string"},"onboardingStep":{"type":"number"},"settings":{"type":"object"},"openingHours":{"type":"object"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","slug","status","onboardingStep","createdAt","updatedAt"]},"UpdateProfileDto":{"type":"object","properties":{"name":{"type":"string","example":"Ph Ngon 123"},"description":{"type":"string","example":"Authentic Vietnamese Pho Restaurant"},"phone":{"type":"string","example":"+84901234567"},"address":{"type":"string","example":"123 Nguyen Hue, District 1, HCMC"},"logoUrl":{"type":"string","example":"https://cdn.example.com/logo.png"},"slug":{"type":"string","example":"pho-ngon-123"}},"required":["name","description","phone","address","logoUrl","slug"]},"DaySchedule":{"type":"object","properties":{"open":{"type":"string","example":"08:00"},"close":{"type":"string","example":"22:00"},"closed":{"type":"boolean","example":false}},"required":["open","close","closed"]},"UpdateOpeningHoursDto":{"type":"object","properties":{"monday":{"$ref":"#/components/schemas/DaySchedule"},"tuesday":{"$ref":"#/components/schemas/DaySchedule"},"wednesday":{"$ref":"#/components/schemas/DaySchedule"},"thursday":{"$ref":"#/components/schemas/DaySchedule"},"friday":{"$ref":"#/components/schemas/DaySchedule"},"saturday":{"$ref":"#/components/schemas/DaySchedule"},"sunday":{"$ref":"#/components/schemas/DaySchedule"}},"required":["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},"TaxSettingsDto":{"type":"object","properties":{"enabled":{"type":"boolean","example":true,"description":"Enable tax calculation"},"rate":{"type":"number","example":10,"description":"Tax percentage (0-100)"},"label":{"type":"string","example":"VAT","description":"Tax type label"},"includedInPrice":{"type":"boolean","example":true,"description":"Include tax in displayed prices"}}},"ServiceChargeSettingsDto":{"type":"object","properties":{"enabled":{"type":"boolean","example":false,"description":"Enable service charge"},"rate":{"type":"number","example":5,"description":"Service charge percentage (0-100)"},"label":{"type":"string","example":"Service Charge","description":"Service charge label"}}},"TipSettingsDto":{"type":"object","properties":{"enabled":{"type":"boolean","example":true,"description":"Enable tip suggestions"},"suggestions":{"example":[10,15,20],"description":"Suggested tip percentages","type":"array","items":{"type":"string"}},"allowCustom":{"type":"boolean","example":true,"description":"Allow custom tip amount"}}},"UpdateSettingsDto":{"type":"object","properties":{"language":{"type":"string","example":"vi"},"timezone":{"type":"string","example":"Asia/Ho_Chi_Minh"},"currency":{"type":"string","example":"USD","description":"Primary currency code"},"tax":{"description":"Tax configuration","allOf":[{"$ref":"#/components/schemas/TaxSettingsDto"}]},"serviceCharge":{"description":"Service charge configuration","allOf":[{"$ref":"#/components/schemas/ServiceChargeSettingsDto"}]},"tip":{"description":"Tip configuration","allOf":[{"$ref":"#/components/schemas/TipSettingsDto"}]}},"required":["language","timezone"]},"CreateTableDto":{"type":"object","properties":{"tableNumber":{"type":"string","example":"Table 1","description":"Table number/name (unique per tenant)"},"capacity":{"type":"number","example":4,"minimum":1,"maximum":20,"description":"Number of seats (1-20)"},"location":{"type":"string","example":"Main Hall","description":"Table location/zone"},"description":{"type":"string","example":"Window table with city view","description":"Additional description"},"displayOrder":{"type":"number","example":0,"description":"Display order for sorting"}},"required":["tableNumber","capacity"]},"TableResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"123e4567-e89b-12d3-a456-426614174000"},"tenantId":{"type":"string","example":"123e4567-e89b-12d3-a456-426614174000"},"tableNumber":{"type":"string","example":"Table 1"},"capacity":{"type":"number","example":4},"location":{"type":"string","example":"Main Hall"},"description":{"type":"string","example":"Window table with city view"},"status":{"type":"string","enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"],"example":"AVAILABLE"},"active":{"type":"boolean","example":true},"displayOrder":{"type":"number","example":0},"qrCodeUrl":{"type":"string","example":"/api/v1/admin/tables/123/qr/download","description":"URL to download QR code"},"qrToken":{"type":"string","example":"eyJhbGc...signature","description":"QR token to generate QR code URL"},"qrGeneratedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"QR code generation timestamp"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z"}},"required":["id","tenantId","tableNumber","capacity","status","active","displayOrder","createdAt","updatedAt"]},"TableListMetaDto":{"type":"object","properties":{"totalAll":{"type":"number","example":25,"description":"Total number of tables for this restaurant (without filters)"},"totalFiltered":{"type":"number","example":10,"description":"Number of tables after applying filters"}},"required":["totalAll","totalFiltered"]},"TableListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/TableResponseDto"}},"meta":{"$ref":"#/components/schemas/TableListMetaDto"}},"required":["data","meta"]},"UpdateTableDto":{"type":"object","properties":{"tableNumber":{"type":"string","example":"Table 1A","description":"Table number/name"},"capacity":{"type":"number","example":6,"minimum":1,"maximum":20,"description":"Number of seats"},"location":{"type":"string","example":"VIP Room","description":"Table location/zone"},"description":{"type":"string","example":"Near window","description":"Additional description"},"status":{"type":"string","enum":["AVAILABLE","OCCUPIED","RESERVED","INACTIVE"],"example":"OCCUPIED","description":"Table status"},"active":{"type":"boolean","example":true,"description":"Active status (soft delete)"},"displayOrder":{"type":"number","example":1,"description":"Display order"}}},"RegenerateQrResponseDto":{"type":"object","properties":{"tableId":{"type":"string","example":"123e4567-e89b-12d3-a456-426614174000"},"qrToken":{"type":"string","example":"eyJhbGc...signature","description":"New QR token"},"qrCodeUrl":{"type":"string","example":"/api/v1/admin/tables/123/qr/download","description":"URL to download new QR code"},"generatedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Generation timestamp"}},"required":["tableId","qrToken","qrCodeUrl","generatedAt"]},"BulkRegenerateQrResponseDto":{"type":"object","properties":{"totalProcessed":{"type":"number","example":15,"description":"Total number of tables processed"},"successCount":{"type":"number","example":15,"description":"Number of QR codes successfully regenerated"},"failureCount":{"type":"number","example":0,"description":"Number of failures"},"affectedTables":{"example":["Table 1","Table 2","VIP-A"],"description":"List of affected table numbers","type":"array","items":{"type":"string"}},"regeneratedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Bulk operation timestamp"}},"required":["totalProcessed","successCount","failureCount","affectedTables","regeneratedAt"]},"CartModifierInputDto":{"type":"object","properties":{"groupId":{"type":"string","example":"adb1cd5a-6121-462d-97b1-e52bb8d84a97"},"optionId":{"type":"string","example":"33eeb203-db4b-49ca-bfb1-e3d03ef05fbd"}},"required":["groupId","optionId"]},"AddToCartDto":{"type":"object","properties":{"menuItemId":{"type":"string","example":"item_123"},"quantity":{"type":"number","example":1,"minimum":1},"modifiers":{"type":"array","items":{"$ref":"#/components/schemas/CartModifierInputDto"}},"notes":{"type":"string","example":"No ice please"}},"required":["menuItemId","quantity"]},"CartItemResponseDto":{"type":"object","properties":{"id":{"type":"string"},"menuItemId":{"type":"string"},"name":{"type":"string"},"price":{"type":"number"},"quantity":{"type":"number"},"modifiers":{"type":"array","items":{"type":"string"}},"notes":{"type":"string"},"itemTotal":{"type":"number"}},"required":["id","menuItemId","name","price","quantity","modifiers","notes","itemTotal"]},"CartResponseDto":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/CartItemResponseDto"}},"subtotal":{"type":"number"},"tax":{"type":"number"},"total":{"type":"number"},"itemCount":{"type":"number"}},"required":["items","subtotal","tax","total","itemCount"]},"UpdateCartItemDto":{"type":"object","properties":{"quantity":{"type":"number","example":1,"minimum":0},"notes":{"type":"string","example":"No ice please"}},"required":["quantity"]},"CheckoutDto":{"type":"object","properties":{"customerName":{"type":"string","example":"John Doe"},"customerNotes":{"type":"string","example":"Table for celebration"},"paymentMethod":{"type":"string","enum":["BILL_TO_TABLE","CARD_ONLINE","SEPAY_QR"],"example":"BILL_TO_TABLE"},"tip":{"type":"number","example":5,"description":"Tip amount in USD"}},"required":["paymentMethod"]},"CartModifierDto":{"type":"object","properties":{"groupId":{"type":"string","example":"mod_123"},"groupName":{"type":"string","example":"Size"},"optionId":{"type":"string","example":"opt_456"},"optionName":{"type":"string","example":"Large"},"priceDelta":{"type":"number","example":10000}},"required":["groupId","groupName","optionId","optionName","priceDelta"]},"OrderItemResponseDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"price":{"type":"number"},"quantity":{"type":"number"},"modifiers":{"type":"array","items":{"$ref":"#/components/schemas/CartModifierDto"}},"notes":{"type":"string"},"itemTotal":{"type":"number"},"prepared":{"type":"boolean"},"preparedAt":{"format":"date-time","type":"string"}},"required":["id","name","price","quantity","modifiers","notes","itemTotal","prepared"]},"OrderResponseDto":{"type":"object","properties":{"id":{"type":"string"},"orderNumber":{"type":"string"},"tableId":{"type":"string"},"tableNumber":{"type":"string"},"customerName":{"type":"string"},"customerNotes":{"type":"string"},"status":{"type":"string"},"priority":{"type":"string","enum":["NORMAL","HIGH","URGENT"],"default":"NORMAL"},"paymentMethod":{"type":"string"},"paymentStatus":{"type":"string"},"subtotal":{"type":"number"},"tax":{"type":"number"},"serviceCharge":{"type":"number","description":"Service charge amount"},"tip":{"type":"number","description":"Tip amount"},"total":{"type":"number"},"items":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemResponseDto"}},"estimatedPrepTime":{"type":"number","description":"Estimated preparation time in minutes"},"actualPrepTime":{"type":"number","description":"Actual preparation time in minutes"},"elapsedPrepTime":{"type":"number","description":"Time elapsed since order started preparing (minutes)"},"createdAt":{"format":"date-time","type":"string"},"receivedAt":{"format":"date-time","type":"string"},"preparingAt":{"format":"date-time","type":"string"},"readyAt":{"format":"date-time","type":"string"},"servedAt":{"format":"date-time","type":"string"},"completedAt":{"format":"date-time","type":"string"}},"required":["id","orderNumber","tableId","tableNumber","customerName","customerNotes","status","priority","paymentMethod","paymentStatus","subtotal","tax","total","items","createdAt"]},"PaginatedResponseDto":{"type":"object","properties":{}},"UpdateOrderStatusDto":{"type":"object","properties":{"status":{"type":"string","enum":["RECEIVED","PREPARING","READY","SERVED","COMPLETED","PAID","CANCELLED"]},"notes":{"type":"string"}},"required":["status"]},"KdsOrdersResponseDto":{"type":"object","properties":{"normal":{"description":"Orders within estimated time (<= 100%)","type":"array","items":{"$ref":"#/components/schemas/OrderResponseDto"}},"high":{"description":"Orders exceeding estimated time (100-150%)","type":"array","items":{"$ref":"#/components/schemas/OrderResponseDto"}},"urgent":{"description":"Orders significantly delayed (> 150%)","type":"array","items":{"$ref":"#/components/schemas/OrderResponseDto"}}},"required":["normal","high","urgent"]},"KdsStatsResponseDto":{"type":"object","properties":{"totalActive":{"type":"number","example":15,"description":"Total orders in PREPARING status"},"urgent":{"type":"number","example":2,"description":"Number of urgent orders (> 150% estimated time)"},"high":{"type":"number","example":3,"description":"Number of high priority orders (100-150% estimated time)"},"normal":{"type":"number","example":10,"description":"Number of normal priority orders (<= 100% estimated time)"},"avgPrepTime":{"type":"number","example":12.5,"description":"Average preparation time in minutes"},"todayCompleted":{"type":"number","example":45,"description":"Number of orders completed today"}},"required":["totalActive","urgent","high","normal"]},"InviteStaffDto":{"type":"object","properties":{"email":{"type":"string","description":"Email of the staff member to invite"},"role":{"type":"string","enum":["STAFF","KITCHEN"],"description":"Role to assign"}},"required":["email","role"]},"InviteStaffResponseDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"},"expiresAt":{"format":"date-time","type":"string"},"message":{"type":"string"}},"required":["id","email","role","expiresAt","message"]},"StaffMemberDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"},"role":{"type":"string","enum":["OWNER","STAFF","KITCHEN"]},"status":{"type":"string","enum":["ACTIVE","INACTIVE","PENDING","LOCKED"]},"createdAt":{"format":"date-time","type":"string"}},"required":["id","email","fullName","role","status","createdAt"]},"ListStaffResponseDto":{"type":"object","properties":{"staff":{"type":"array","items":{"$ref":"#/components/schemas/StaffMemberDto"}},"total":{"type":"number"}},"required":["staff","total"]},"PendingInvitationDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string","enum":["STAFF","KITCHEN"]},"expiresAt":{"format":"date-time","type":"string"},"createdAt":{"format":"date-time","type":"string"}},"required":["id","email","role","expiresAt","createdAt"]},"ListInvitationsResponseDto":{"type":"object","properties":{"invitations":{"type":"array","items":{"$ref":"#/components/schemas/PendingInvitationDto"}},"total":{"type":"number"}},"required":["invitations","total"]},"UpdateStaffRoleDto":{"type":"object","properties":{"role":{"type":"string","enum":["STAFF","KITCHEN"],"description":"New role to assign"}},"required":["role"]},"RemoveStaffResponseDto":{"type":"object","properties":{"message":{"type":"string"},"removedUserId":{"type":"string"}},"required":["message","removedUserId"]},"ResendInviteResponseDto":{"type":"object","properties":{"message":{"type":"string"},"expiresAt":{"format":"date-time","type":"string"}},"required":["message","expiresAt"]},"VerifyInviteTokenResponseDto":{"type":"object","properties":{"valid":{"type":"boolean"},"email":{"type":"string"},"role":{"type":"string"},"tenantName":{"type":"string"},"expiresAt":{"format":"date-time","type":"string"}},"required":["valid"]},"AcceptInviteDto":{"type":"object","properties":{"token":{"type":"string","description":"Invitation token from email link"},"fullName":{"type":"string","description":"Full name of the staff member"},"password":{"type":"string","description":"Password for the new account"}},"required":["token","fullName","password"]},"AcceptInviteResponseDto":{"type":"object","properties":{"message":{"type":"string"},"userId":{"type":"string"},"email":{"type":"string"},"tenantId":{"type":"string"}},"required":["message","userId","email","tenantId"]},"CreateReviewDto":{"type":"object","properties":{"rating":{"type":"number","description":"Rating from 1 to 5 stars","minimum":1,"maximum":5},"comment":{"type":"string","description":"Optional comment for the review"}},"required":["rating"]},"ReviewResponseDto":{"type":"object","properties":{"id":{"type":"string"},"orderItemId":{"type":"string"},"sessionId":{"type":"string"},"rating":{"type":"number"},"comment":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"itemName":{"type":"string","description":"Menu item name"}},"required":["id","orderItemId","sessionId","rating","createdAt"]},"OrderReviewSummaryDto":{"type":"object","properties":{"orderId":{"type":"string"},"reviews":{"type":"array","items":{"$ref":"#/components/schemas/ReviewResponseDto"}},"averageRating":{"type":"number","description":"Average rating across all items"},"totalReviews":{"type":"number","description":"Total number of reviews"}},"required":["orderId","reviews","averageRating","totalReviews"]},"MenuItemReviewStatsDto":{"type":"object","properties":{"menuItemId":{"type":"string"},"menuItemName":{"type":"string"},"averageRating":{"type":"number","description":"Average rating for this menu item"},"totalReviews":{"type":"number","description":"Total number of reviews"},"ratingDistribution":{"type":"object","description":"Rating distribution (1-5)"}},"required":["menuItemId","menuItemName","averageRating","totalReviews","ratingDistribution"]},"TenantReviewStatsDto":{"type":"object","properties":{"overallRating":{"type":"number","description":"Overall average rating"},"totalReviews":{"type":"number","description":"Total reviews count"},"recentReviewsCount":{"type":"number","description":"Reviews in last 30 days"},"topRatedItems":{"description":"Top rated items","type":"array","items":{"$ref":"#/components/schemas/MenuItemReviewStatsDto"}},"lowRatedItems":{"description":"Items needing improvement","type":"array","items":{"$ref":"#/components/schemas/MenuItemReviewStatsDto"}}},"required":["overallRating","totalReviews","recentReviewsCount","topRatedItems","lowRatedItems"]},"CreatePromotionDto":{"type":"object","properties":{"code":{"type":"string","description":"Promotion code (e.g., SUMMER20)","maxLength":50},"description":{"type":"string","description":"Description of the promotion"},"type":{"type":"string","enum":["PERCENTAGE","FIXED"],"description":"Type: PERCENTAGE or FIXED"},"value":{"type":"number","description":"Value: percentage (0-100) or fixed amount in VND","example":20},"minOrderValue":{"type":"number","description":"Minimum order value to apply promo (VND)","example":100000},"maxDiscount":{"type":"number","description":"Maximum discount cap for percentage type (VND)","example":50000},"usageLimit":{"type":"number","description":"Maximum number of times this promo can be used","example":100},"startsAt":{"type":"string","description":"Start date of promotion","example":"2025-01-01T00:00:00Z"},"expiresAt":{"type":"string","description":"Expiry date of promotion","example":"2025-12-31T23:59:59Z"},"active":{"type":"boolean","description":"Is promotion active","default":true}},"required":["code","type","value","startsAt","expiresAt"]},"PromotionResponseDto":{"type":"object","properties":{"id":{"type":"string"},"tenantId":{"type":"string"},"code":{"type":"string"},"description":{"type":"string"},"type":{"type":"string","enum":["PERCENTAGE","FIXED"]},"value":{"type":"number"},"minOrderValue":{"type":"number"},"maxDiscount":{"type":"number"},"usageLimit":{"type":"number"},"usageCount":{"type":"number"},"startsAt":{"format":"date-time","type":"string"},"expiresAt":{"format":"date-time","type":"string"},"active":{"type":"boolean"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"isValid":{"type":"boolean","description":"Is currently valid (active + within date range + not exceeded)"}},"required":["id","tenantId","code","type","value","usageCount","startsAt","expiresAt","active","createdAt","updatedAt"]},"UpdatePromotionDto":{"type":"object","properties":{"description":{"type":"string"},"minOrderValue":{"type":"number"},"maxDiscount":{"type":"number"},"usageLimit":{"type":"number"},"startsAt":{"type":"string"},"expiresAt":{"type":"string"},"active":{"type":"boolean"}}},"ValidatePromoDto":{"type":"object","properties":{"code":{"type":"string","description":"Promotion code to validate"},"orderSubtotal":{"type":"number","description":"Order subtotal to check minimum requirement"}},"required":["code","orderSubtotal"]},"ValidatePromoResponseDto":{"type":"object","properties":{"valid":{"type":"boolean"},"error":{"type":"string"},"discountAmount":{"type":"number","description":"Calculated discount amount (VND)"},"promotion":{"type":"object","description":"Promotion details if valid"}},"required":["valid"]}}}}